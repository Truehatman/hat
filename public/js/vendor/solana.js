(self.webpackChunk=self.webpackChunk||[]).push([[3715],{39386:(e,t,r)=>{"use strict";t._O=t.Jq=t.KB=t.u8=t.cv=void 0,t.Ik=t.A9=t.n_=t.gM=void 0;const n=r(48764);function i(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function a(e){return i(e),n.Buffer.from(e.buffer,e.byteOffset,e.length)}class s{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function o(e,t){return t.property?e+"["+t.property+"]":e}class u extends s{isCount(){throw new Error("ExternalLayout is abstract")}}class c extends u{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){i(e);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}class l extends u{constructor(e,t=0,r){if(!(e instanceof s))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof d||this.layout instanceof h}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}class d extends s{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return a(e).readUIntLE(t,this.span)}encode(e,t,r=0){return a(t).writeUIntLE(e,r,this.span),this.span}}class h extends s{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return a(e).readUIntBE(t,this.span)}encode(e,t,r=0){return a(t).writeUIntBE(e,r,this.span),this.span}}class f extends s{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return a(e).readIntLE(t,this.span)}encode(e,t,r=0){return a(t).writeIntLE(e,r,this.span),this.span}}class p extends s{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return a(e).readIntBE(t,this.span)}encode(e,t,r=0){return a(t).writeIntBE(e,r,this.span),this.span}}const y=Math.pow(2,32);function g(e){const t=Math.floor(e/y);return{hi32:t,lo32:e-t*y}}function b(e,t){return e*y+t}class m extends s{constructor(e){super(8,e)}decode(e,t=0){const r=a(e),n=r.readUInt32LE(t);return b(r.readUInt32LE(t+4),n)}encode(e,t,r=0){const n=g(e),i=a(t);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}class k extends s{constructor(e){super(8,e)}decode(e,t=0){const r=a(e);return b(r.readUInt32BE(t),r.readUInt32BE(t+4))}encode(e,t,r=0){const n=g(e),i=a(t);return i.writeUInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}class v extends s{constructor(e){super(8,e)}decode(e,t=0){const r=a(e),n=r.readUInt32LE(t);return b(r.readInt32LE(t+4),n)}encode(e,t,r=0){const n=g(e),i=a(t);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}class w extends s{constructor(e){super(8,e)}decode(e,t=0){const r=a(e);return b(r.readInt32BE(t),r.readUInt32BE(t+4))}encode(e,t,r=0){const n=g(e),i=a(t);return i.writeInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}class x extends s{constructor(e){super(4,e)}decode(e,t=0){return a(e).readFloatLE(t)}encode(e,t,r=0){return a(t).writeFloatLE(e,r),4}}class S extends s{constructor(e){super(4,e)}decode(e,t=0){return a(e).readFloatBE(t)}encode(e,t,r=0){return a(t).writeFloatBE(e,r),4}}class I extends s{constructor(e){super(8,e)}decode(e,t=0){return a(e).readDoubleLE(t)}encode(e,t,r=0){return a(t).writeDoubleLE(e,r),8}}class A extends s{constructor(e){super(8,e)}decode(e,t=0){return a(e).readDoubleBE(t)}encode(e,t,r=0){return a(t).writeDoubleBE(e,r),8}}class _ extends s{constructor(e,t,r){if(!(e instanceof s))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof u&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(t instanceof u)&&0<e.span&&(n=t*e.span),super(n,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof u&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(e,t+r),++i}return r}decode(e,t=0){const r=[];let n=0,i=this.count;for(i instanceof u&&(i=i.decode(e,t));n<i;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r=0){const n=this.elementLayout,i=e.reduce(((e,i)=>e+n.encode(i,t,r+e)),0);return this.count instanceof u&&this.count.encode(e.length,t,r),i}}class B extends s{constructor(e,t,r){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof s),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===r&&(r=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(e,t);return t+=i,r+i}),0)}catch(e){throw new RangeError("indeterminate span")}return r}decode(e,t=0){i(e);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){const n=r;let i=0,a=0;for(const n of this.fields){let s=n.span;if(a=0<s?s:0,void 0!==n.property){const i=e[n.property];void 0!==i&&(a=n.encode(i,t,r),0>s&&(s=n.getSpan(t,r)))}i=r,r+=s}return i+a-n}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class R{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}}class E extends R{constructor(e,t){if(!(e instanceof u&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}class P extends s{constructor(e,t,r){let n;if(e instanceof d||e instanceof h)n=new E(new l(e));else if(e instanceof u&&e.isCount())n=new E(e);else{if(!(e instanceof R))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");n=e}if(void 0===t&&(t=null),!(null===t||t instanceof s))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&(e instanceof d||e instanceof h)&&(i+=n.layout.span)),super(i,r),this.discriminator=n,this.usesPrefixDiscriminator=e instanceof d||e instanceof h,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return a(e)},this.configGetSourceVariant=function(e){a=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r;const n=this.discriminator,i=n.decode(e,t),a=this.registry[i];if(void 0===a){const a=this.defaultLayout;let s=0;this.usesPrefixDiscriminator&&(s=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[a.property]=a.decode(e,t+s)}else r=a.decode(e,t);return r}encode(e,t,r=0){const n=this.getSourceVariant(e);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=n.layout.span),n.encode(e[n.property],t,r),a+i.encode(e[i.property],t,r+a)}return n.encode(e,t,r)}addVariant(e,t,r){const n=new Z(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t=0){let r;return r=e instanceof Uint8Array?this.discriminator.decode(e,t):e,this.registry[r]}}class Z extends s{constructor(e,t,r,n){if(!(e instanceof P))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof s))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof n)throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=r?r.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,n),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(e,t+r)),r+n}decode(e,t=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let i=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),i+=this.layout.getSpan(t,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function T(e){return 0>e&&(e+=4294967296),e}class O extends s{constructor(e,t,r){if(!(e instanceof d||e instanceof h))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===r&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let n=0;this._packedSetValue=function(e){return n=T(e),this},this._packedGetValue=function(){return n}}decode(e,t=0){const r=this.makeDestinationObject(),n=this.word.decode(e,t);this._packedSetValue(n);for(const t of this.fields)void 0!==t.property&&(r[t.property]=t.decode(e));return r}encode(e,t,r=0){const n=this.word.decode(t,r);this._packedSetValue(n);for(const t of this.fields)if(void 0!==t.property){const r=e[t.property];void 0!==r&&t.encode(r)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new C(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new W(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}class C{constructor(e,t,r){if(!(e instanceof O))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const n=8*e.span,i=e.fields.reduce(((e,t)=>e+t.bits),0);if(t+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-t),this.wordMask=T(this.valueMask<<this.start),this.property=r}decode(e,t){return T(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==T(e&this.valueMask))throw new TypeError(o("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=T(e<<this.start);this.container._packedSetValue(T(t&~this.wordMask)|r)}}class W extends C{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e=+e),super.encode(e)}}class L extends s{constructor(e,t){if(!(e instanceof u&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof u||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),a(e).slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof u&&(n=e.length),!(e instanceof Uint8Array&&n===e.length))throw new TypeError(o("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>t.length)throw new RangeError("encoding overruns Uint8Array");const i=a(e);return a(t).write(i.toString("hex"),r,n,"hex"),this.length instanceof u&&this.length.encode(n,t,r),n}}class U extends s{constructor(e){super(-1,e)}getSpan(e,t=0){i(e);let r=t;for(;r<e.length&&0!==e[r];)r+=1;return 1+r-t}decode(e,t=0){const r=this.getSpan(e,t);return a(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){"string"!=typeof e&&(e=String(e));const i=n.Buffer.from(e,"utf8"),s=i.length;if(r+s>t.length)throw new RangeError("encoding overruns Buffer");const o=a(t);return i.copy(o,r),o[r+s]=0,s+1}}class K extends s{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return i(e),e.length-t}decode(e,t=0){const r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return a(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){"string"!=typeof e&&(e=String(e));const i=n.Buffer.from(e,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(a(t),r),s}}class z extends s{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}t.cv=(e,t,r)=>new l(e,t,r),t.u8=e=>new d(1,e),t.KB=e=>new d(2,e),t.Jq=e=>new d(4,e),t._O=e=>new m(e),t.gM=e=>new v(e),t.n_=(e,t,r)=>new B(e,t,r),t.A9=(e,t,r)=>new _(e,t,r),t.Ik=(e,t)=>new L(e,t)},59917:(e,t,r)=>{"use strict";r.d(t,{$Z:()=>_e,GS:()=>Ee,YW:()=>Se,ew:()=>un,nh:()=>F,yc:()=>De});var n=r(15671),i=r(43144),a=r(48764),s=r(75113),o=r(15861),u=r(60136),c=r(82963),l=r(61120),d=r(64687),h=r.n(d),f=r(13550),p=r.n(f),y=r(10011),g=r.n(y),b=r(17748),m=r(25532),k=r(39386),v=r(86854),w=r(40475),x=r(4942),S=r(41451),I=r(71002),A=r(91),_=r(53471),B=r(31198),R=r.n(B),E=r(16512),P=r(73237),Z=r(66855),T=r(89062),O=r(85609),C=r(95085),W=(s.UN.utils.randomPrivateKey,function(){var e=s.UN.utils.randomPrivateKey(),t=L(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}}),L=s.UN.getPublicKey;function U(e){try{return s.UN.ExtendedPoint.fromHex(e),!0}catch(e){return!1}}var K=function(e,t){return s.UN.sign(e,t.slice(0,32))},z=s.UN.verify,q=function(e){return a.Buffer.isBuffer(e)?e:e instanceof Uint8Array?a.Buffer.from(e.buffer,e.byteOffset,e.byteLength):a.Buffer.from(e)};var j,N=function(){function e(t){(0,n.Z)(this,e),Object.assign(this,t)}return(0,i.Z)(e,[{key:"encode",value:function(){return a.Buffer.from((0,m.serialize)(M,this))}}],[{key:"decode",value:function(e){return(0,m.deserialize)(M,this,e)}},{key:"decodeUnchecked",value:function(e){return(0,m.deserializeUnchecked)(M,this,e)}}]),e}(),M=new Map;function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var D=32;var J=1;j=Symbol.toStringTag;var F=function(e){(0,u.Z)(l,e);var t,r,s,c=G(l);function l(e){var t;if((0,n.Z)(this,l),(t=c.call(this,{}))._bn=void 0,function(e){return void 0!==e._bn}(e))t._bn=e._bn;else{if("string"==typeof e){var r=g().decode(e);if(r.length!=D)throw new Error("Invalid public key input");t._bn=new(p())(r)}else t._bn=new(p())(e);if(t._bn.byteLength()>D)throw new Error("Invalid public key input")}return t}return(0,i.Z)(l,[{key:"equals",value:function(e){return this._bn.eq(e._bn)}},{key:"toBase58",value:function(){return g().encode(this.toBytes())}},{key:"toJSON",value:function(){return this.toBase58()}},{key:"toBytes",value:function(){var e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}},{key:"toBuffer",value:function(){var e=this._bn.toArrayLike(a.Buffer);if(e.length===D)return e;var t=a.Buffer.alloc(32);return e.copy(t,32-e.length),t}},{key:j,get:function(){return"PublicKey(".concat(this.toString(),")")}},{key:"toString",value:function(){return this.toBase58()}}],[{key:"unique",value:function(){var e=new l(J);return J+=1,new l(e.toBuffer())}},{key:"createWithSeed",value:(s=(0,o.Z)(h().mark((function e(t,r,n){var i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.Buffer.concat([t.toBuffer(),a.Buffer.from(r),n.toBuffer()]),s=(0,b.J)(i),e.abrupt("return",new l(s));case 3:case"end":return e.stop()}}),e)}))),function(e,t,r){return s.apply(this,arguments)})},{key:"createProgramAddressSync",value:function(e,t){var r=a.Buffer.alloc(0);e.forEach((function(e){if(e.length>32)throw new TypeError("Max seed length exceeded");r=a.Buffer.concat([r,q(e)])})),r=a.Buffer.concat([r,t.toBuffer(),a.Buffer.from("ProgramDerivedAddress")]);var n=(0,b.J)(r);if(U(n))throw new Error("Invalid seeds, address must fall off the curve");return new l(n)}},{key:"createProgramAddress",value:(r=(0,o.Z)(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.createProgramAddressSync(t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"findProgramAddressSync",value:function(e,t){for(var r,n=255;0!=n;){try{var i=e.concat(a.Buffer.from([n]));r=this.createProgramAddressSync(i,t)}catch(e){if(e instanceof TypeError)throw e;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}},{key:"findProgramAddress",value:(t=(0,o.Z)(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.findProgramAddressSync(t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"isOnCurve",value:function(e){return U(new l(e).toBytes())}}]),l}(N);F.default=new F("11111111111111111111111111111111"),M.set(F,{kind:"struct",fields:[["_bn","u256"]]});new F("BPFLoader1111111111111111111111111111111111");var X=1232;function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var V=function(e){(0,u.Z)(r,e);var t=H(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,"Signature ".concat(e," has expired: block height exceeded."))).signature=void 0,i.signature=e,i}return(0,i.Z)(r)}((0,E.Z)(Error));Object.defineProperty(V.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var $=function(e){(0,u.Z)(r,e);var t=H(r);function r(e,i){var a;return(0,n.Z)(this,r),(a=t.call(this,"Transaction was not confirmed in ".concat(i.toFixed(2)," seconds. It is ")+"unknown if it succeeded or failed. Check signature "+"".concat(e," using the Solana Explorer or CLI tools."))).signature=void 0,a.signature=e,a}return(0,i.Z)(r)}((0,E.Z)(Error));Object.defineProperty($.prototype,"name",{value:"TransactionExpiredTimeoutError"});var Q=function(e){(0,u.Z)(r,e);var t=H(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,"Signature ".concat(e," has expired: the nonce is no longer valid."))).signature=void 0,i.signature=e,i}return(0,i.Z)(r)}((0,E.Z)(Error));function Y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(Q.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var te=function(){function e(t,r){(0,n.Z)(this,e),this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=r}return(0,i.Z)(e,[{key:"keySegments",value:function(){var e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}},{key:"get",value:function(e){var t,r=Y(this.keySegments());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e<n.length)return n[e];e-=n.length}}catch(e){r.e(e)}finally{r.f()}}},{key:"length",get:function(){return this.keySegments().flat().length}},{key:"compileInstructions",value:function(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");var t=new Map;this.keySegments().flat().forEach((function(e,r){t.set(e.toBase58(),r)}));var r=function(e){var r=t.get(e.toBase58());if(void 0===r)throw new Error("Encountered an unknown instruction account key during compilation");return r};return e.map((function(e){return{programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map((function(e){return r(e.pubkey)})),data:e.data}}))}}]),e}(),re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return k.Ik(32,e)},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"signature";return k.Ik(64,e)},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",t=k.n_([k.Jq("length"),k.Jq("lengthPadding"),k.Ik(k.cv(k.Jq(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t),i=t;return i.decode=function(e,t){return r(e,t).chars.toString()},i.encode=function(e,t,r){var i={chars:a.Buffer.from(e,"utf8")};return n(i,t,r)},i.alloc=function(e){return k.Jq().span+k.Jq().span+a.Buffer.from(e,"utf8").length},i};function ae(e,t){var r=function e(r){if(r.span>=0)return r.span;if("function"==typeof r.alloc)return r.alloc(t[r.property]);if("count"in r&&"elementLayout"in r){var n=t[r.property];if(Array.isArray(n))return n.length*e(r.elementLayout)}else if("fields"in r)return ae({layout:r},t[r.property]);return 0},n=0;return e.layout.fields.forEach((function(e){n+=r(e)})),n}function se(e){for(var t=0,r=0;;){var n=e.shift();if(t|=(127&n)<<7*r,r+=1,0==(128&n))break}return t}function oe(e,t){for(var r=t;;){var n=127&r;if(0==(r>>=7)){e.push(n);break}n|=128,e.push(n)}}function ue(e,t){if(!e)throw new Error(t||"Assertion failed")}function ce(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return le(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var de=function(){function e(t,r){(0,n.Z)(this,e),this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=r}return(0,i.Z)(e,[{key:"getMessageComponents",value:function(){var e=(0,S.Z)(this.keyMetaMap.entries());ue(e.length<=256,"Max static account keys length exceeded");var t=e.filter((function(e){var t=(0,v.Z)(e,2)[1];return t.isSigner&&t.isWritable})),r=e.filter((function(e){var t=(0,v.Z)(e,2)[1];return t.isSigner&&!t.isWritable})),n=e.filter((function(e){var t=(0,v.Z)(e,2)[1];return!t.isSigner&&t.isWritable})),i=e.filter((function(e){var t=(0,v.Z)(e,2)[1];return!t.isSigner&&!t.isWritable})),a={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};return ue(t.length>0,"Expected at least one writable signer key"),ue((0,v.Z)(t[0],1)[0]===this.payer.toBase58(),"Expected first writable signer key to be the fee payer"),[a,[].concat((0,S.Z)(t.map((function(e){var t=(0,v.Z)(e,1)[0];return new F(t)}))),(0,S.Z)(r.map((function(e){var t=(0,v.Z)(e,1)[0];return new F(t)}))),(0,S.Z)(n.map((function(e){var t=(0,v.Z)(e,1)[0];return new F(t)}))),(0,S.Z)(i.map((function(e){var t=(0,v.Z)(e,1)[0];return new F(t)}))))]}},{key:"extractTableLookup",value:function(e){var t=this.drainKeysFoundInLookupTable(e.state.addresses,(function(e){return!e.isSigner&&!e.isInvoked&&e.isWritable})),r=(0,v.Z)(t,2),n=r[0],i=r[1],a=this.drainKeysFoundInLookupTable(e.state.addresses,(function(e){return!e.isSigner&&!e.isInvoked&&!e.isWritable})),s=(0,v.Z)(a,2),o=s[0],u=s[1];if(0!==n.length||0!==o.length)return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:o},{writable:i,readonly:u}]}},{key:"drainKeysFoundInLookupTable",value:function(e,t){var r,n=this,i=new Array,a=new Array,s=ce(this.keyMetaMap.entries());try{var o=function(){var s=(0,v.Z)(r.value,2),o=s[0],u=s[1];if(t(u)){var c=new F(o),l=e.findIndex((function(e){return e.equals(c)}));l>=0&&(ue(l<256,"Max lookup table index exceeded"),i.push(l),a.push(c),n.keyMetaMap.delete(o))}};for(s.s();!(r=s.n()).done;)o()}catch(e){s.e(e)}finally{s.f()}return[i,a]}}],[{key:"compile",value:function(t,r){var n=new Map,i=function(e){var t=e.toBase58(),r=n.get(t);return void 0===r&&(r={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(t,r)),r},a=i(r);a.isSigner=!0,a.isWritable=!0;var s,o=ce(t);try{for(o.s();!(s=o.n()).done;){var u=s.value;i(u.programId).isInvoked=!0;var c,l=ce(u.keys);try{for(l.s();!(c=l.n()).done;){var d=c.value,h=i(d.pubkey);h.isSigner||(h.isSigner=d.isSigner),h.isWritable||(h.isWritable=d.isWritable)}}catch(e){l.e(e)}finally{l.f()}}}catch(e){o.e(e)}finally{o.f()}return new e(r,n)}}]),e}(),he=function(){function e(t){var r=this;(0,n.Z)(this,e),this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map((function(e){return new F(e)})),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach((function(e){return r.indexToProgramIds.set(e.programIdIndex,r.accountKeys[e.programIdIndex])}))}return(0,i.Z)(e,[{key:"version",get:function(){return"legacy"}},{key:"staticAccountKeys",get:function(){return this.accountKeys}},{key:"compiledInstructions",get:function(){return this.instructions.map((function(e){return{programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:g().decode(e.data)}}))}},{key:"addressTableLookups",get:function(){return[]}},{key:"getAccountKeys",value:function(){return new te(this.staticAccountKeys)}},{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){var t=this.header.numRequiredSignatures;return e>=this.header.numRequiredSignatures?e-t<this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}},{key:"isProgramId",value:function(e){return this.indexToProgramIds.has(e)}},{key:"programIds",value:function(){return(0,S.Z)(this.indexToProgramIds.values())}},{key:"nonProgramIds",value:function(){var e=this;return this.accountKeys.filter((function(t,r){return!e.isProgramId(r)}))}},{key:"serialize",value:function(){var e=this.accountKeys.length,t=[];oe(t,e);var r=this.instructions.map((function(e){var t=e.accounts,r=e.programIdIndex,n=Array.from(g().decode(e.data)),i=[];oe(i,t.length);var s=[];return oe(s,n.length),{programIdIndex:r,keyIndicesCount:a.Buffer.from(i),keyIndices:t,dataLength:a.Buffer.from(s),data:n}})),n=[];oe(n,r.length);var i=a.Buffer.alloc(X);a.Buffer.from(n).copy(i);var s=n.length;r.forEach((function(e){var t=k.n_([k.u8("programIdIndex"),k.Ik(e.keyIndicesCount.length,"keyIndicesCount"),k.A9(k.u8("keyIndex"),e.keyIndices.length,"keyIndices"),k.Ik(e.dataLength.length,"dataLength"),k.A9(k.u8("userdatum"),e.data.length,"data")]).encode(e,i,s);s+=t})),i=i.slice(0,s);var o=k.n_([k.Ik(1,"numRequiredSignatures"),k.Ik(1,"numReadonlySignedAccounts"),k.Ik(1,"numReadonlyUnsignedAccounts"),k.Ik(t.length,"keyCount"),k.A9(re("key"),e,"keys"),re("recentBlockhash")]),u={numRequiredSignatures:a.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:a.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:a.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:a.Buffer.from(t),keys:this.accountKeys.map((function(e){return q(e.toBytes())})),recentBlockhash:g().decode(this.recentBlockhash)},c=a.Buffer.alloc(2048),l=o.encode(u,c);return i.copy(c,l),c.slice(0,l+i.length)}}],[{key:"compile",value:function(t){var r=de.compile(t.instructions,t.payerKey).getMessageComponents(),n=(0,v.Z)(r,2),i=n[0],a=n[1],s=new te(a).compileInstructions(t.instructions).map((function(e){return{programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:g().encode(e.data)}}));return new e({header:i,accountKeys:a,recentBlockhash:t.recentBlockhash,instructions:s})}},{key:"from",value:function(t){var r=(0,S.Z)(t),n=r.shift();if(n!==(127&n))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");for(var i=r.shift(),s=r.shift(),o=se(r),u=[],c=0;c<o;c++){var l=r.slice(0,D);r=r.slice(D),u.push(new F(a.Buffer.from(l)))}for(var d=r.slice(0,D),h=se(r=r.slice(D)),f=[],p=0;p<h;p++){var y=r.shift(),b=se(r),m=r.slice(0,b),k=se(r=r.slice(b)),v=r.slice(0,k),w=g().encode(a.Buffer.from(v));r=r.slice(k),f.push({programIdIndex:y,accounts:m,data:w})}return new e({header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:g().encode(a.Buffer.from(d)),accountKeys:u,instructions:f})}}]),e}();function fe(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pe(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ye=function(){function e(t){(0,n.Z)(this,e),this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}return(0,i.Z)(e,[{key:"version",get:function(){return 0}},{key:"numAccountKeysFromLookups",get:function(){var e,t=0,r=fe(this.addressTableLookups);try{for(r.s();!(e=r.n()).done;){var n=e.value;t+=n.readonlyIndexes.length+n.writableIndexes.length}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"getAccountKeys",value:function(e){var t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new te(this.staticAccountKeys,t)}},{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){var t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;return e>=r?e-r<this.addressTableLookups.reduce((function(e,t){return e+t.writableIndexes.length}),0):e>=this.header.numRequiredSignatures?e-t<r-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}},{key:"resolveAddressTableLookups",value:function(e){var t,r={writable:[],readonly:[]},n=fe(this.addressTableLookups);try{var i=function(){var n=t.value,i=e.find((function(e){return e.key.equals(n.accountKey)}));if(!i)throw new Error("Failed to find address lookup table account for table key ".concat(n.accountKey.toBase58()));var a,s=fe(n.writableIndexes);try{for(s.s();!(a=s.n()).done;){var o=a.value;if(!(o<i.state.addresses.length))throw new Error("Failed to find address for index ".concat(o," in address lookup table ").concat(n.accountKey.toBase58()));r.writable.push(i.state.addresses[o])}}catch(e){s.e(e)}finally{s.f()}var u,c=fe(n.readonlyIndexes);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(!(l<i.state.addresses.length))throw new Error("Failed to find address for index ".concat(l," in address lookup table ").concat(n.accountKey.toBase58()));r.readonly.push(i.state.addresses[l])}}catch(e){c.e(e)}finally{c.f()}};for(n.s();!(t=n.n()).done;)i()}catch(e){n.e(e)}finally{n.f()}return r}},{key:"serialize",value:function(){var e=Array();oe(e,this.staticAccountKeys.length);var t=this.serializeInstructions(),r=Array();oe(r,this.compiledInstructions.length);var n=this.serializeAddressTableLookups(),i=Array();oe(i,this.addressTableLookups.length);var a=k.n_([k.u8("prefix"),k.n_([k.u8("numRequiredSignatures"),k.u8("numReadonlySignedAccounts"),k.u8("numReadonlyUnsignedAccounts")],"header"),k.Ik(e.length,"staticAccountKeysLength"),k.A9(re(),this.staticAccountKeys.length,"staticAccountKeys"),re("recentBlockhash"),k.Ik(r.length,"instructionsLength"),k.Ik(t.length,"serializedInstructions"),k.Ik(i.length,"addressTableLookupsLength"),k.Ik(n.length,"serializedAddressTableLookups")]),s=new Uint8Array(X),o=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map((function(e){return e.toBytes()})),recentBlockhash:g().decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},s);return s.slice(0,o)}},{key:"serializeInstructions",value:function(){var e,t=0,r=new Uint8Array(X),n=fe(this.compiledInstructions);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=Array();oe(a,i.accountKeyIndexes.length);var s=Array();oe(s,i.data.length),t+=k.n_([k.u8("programIdIndex"),k.Ik(a.length,"encodedAccountKeyIndexesLength"),k.A9(k.u8(),i.accountKeyIndexes.length,"accountKeyIndexes"),k.Ik(s.length,"encodedDataLength"),k.Ik(i.data.length,"data")]).encode({programIdIndex:i.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(a),accountKeyIndexes:i.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:i.data},r,t)}}catch(e){n.e(e)}finally{n.f()}return r.slice(0,t)}},{key:"serializeAddressTableLookups",value:function(){var e,t=0,r=new Uint8Array(X),n=fe(this.addressTableLookups);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=Array();oe(a,i.writableIndexes.length);var s=Array();oe(s,i.readonlyIndexes.length),t+=k.n_([re("accountKey"),k.Ik(a.length,"encodedWritableIndexesLength"),k.A9(k.u8(),i.writableIndexes.length,"writableIndexes"),k.Ik(s.length,"encodedReadonlyIndexesLength"),k.A9(k.u8(),i.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:i.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(a),writableIndexes:i.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:i.readonlyIndexes},r,t)}}catch(e){n.e(e)}finally{n.f()}return r.slice(0,t)}}],[{key:"compile",value:function(t){var r,n=de.compile(t.instructions,t.payerKey),i=new Array,a={writable:new Array,readonly:new Array},s=fe(t.addressLookupTableAccounts||[]);try{for(s.s();!(r=s.n()).done;){var o=r.value,u=n.extractTableLookup(o);if(void 0!==u){var c,l,d=(0,v.Z)(u,2),h=d[0],f=d[1],p=f.writable,y=f.readonly;i.push(h),(c=a.writable).push.apply(c,(0,S.Z)(p)),(l=a.readonly).push.apply(l,(0,S.Z)(y))}}}catch(e){s.e(e)}finally{s.f()}var g=n.getMessageComponents(),b=(0,v.Z)(g,2),m=b[0],k=b[1],w=new te(k,a).compileInstructions(t.instructions);return new e({header:m,staticAccountKeys:k,recentBlockhash:t.recentBlockhash,compiledInstructions:w,addressTableLookups:i})}},{key:"deserialize",value:function(t){var r=(0,S.Z)(t),n=r.shift(),i=127&n;ue(n!==i,"Expected versioned message but received legacy message");ue(0===i,"Expected versioned message with version 0 but found version ".concat(i));for(var a={numRequiredSignatures:r.shift(),numReadonlySignedAccounts:r.shift(),numReadonlyUnsignedAccounts:r.shift()},s=[],o=se(r),u=0;u<o;u++)s.push(new F(r.splice(0,D)));for(var c=g().encode(r.splice(0,D)),l=se(r),d=[],h=0;h<l;h++){var f=r.shift(),p=se(r),y=r.splice(0,p),b=se(r),m=new Uint8Array(r.splice(0,b));d.push({programIdIndex:f,accountKeyIndexes:y,data:m})}for(var k=se(r),v=[],w=0;w<k;w++){var x=new F(r.splice(0,D)),I=se(r),A=r.splice(0,I),_=se(r),B=r.splice(0,_);v.push({accountKey:x,writableIndexes:A,readonlyIndexes:B})}return new e({header:a,staticAccountKeys:s,recentBlockhash:c,compiledInstructions:d,addressTableLookups:v})}}]),e}(),ge={deserializeMessageVersion:function(e){var t=e[0],r=127&t;return r===t?"legacy":r},deserialize:function(e){var t=ge.deserializeMessageVersion(e);if("legacy"===t)return he.from(e);if(0===t)return ye.deserialize(e);throw new Error("Transaction message version ".concat(t," deserialization is not supported"))}};function be(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return me(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ve=function(e){return e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID",e}({}),we=a.Buffer.alloc(64).fill(0),xe=function(){function e(t){(0,n.Z)(this,e),this.keys=void 0,this.programId=void 0,this.data=a.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}return(0,i.Z)(e,[{key:"toJSON",value:function(){return{keys:this.keys.map((function(e){var t=e.pubkey,r=e.isSigner,n=e.isWritable;return{pubkey:t.toJSON(),isSigner:r,isWritable:n}})),programId:this.programId.toJSON(),data:(0,S.Z)(this.data)}}}]),e}(),Se=function(){function e(t){if((0,n.Z)(this,e),this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){var r=t,i=r.minContextSlot,a=r.nonceInfo;this.minNonceContextSlot=i,this.nonceInfo=a}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){var s=t,o=s.blockhash,u=s.lastValidBlockHeight;this.recentBlockhash=o,this.lastValidBlockHeight=u}else{var c=t,l=c.recentBlockhash,d=c.nonceInfo;d&&(this.nonceInfo=d),this.recentBlockhash=l}}var t;return(0,i.Z)(e,[{key:"signature",get:function(){return this.signatures.length>0?this.signatures[0].signature:null}},{key:"toJSON",value:function(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((function(e){return e.toJSON()})),signers:this.signatures.map((function(e){return e.publicKey.toJSON()}))}}},{key:"add",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(0===r.length)throw new Error("No instructions");return r.forEach((function(t){"instructions"in t?e.instructions=e.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?e.instructions.push(t):e.instructions.push(new xe(t))})),this}},{key:"compileMessage",value:function(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;var e,t,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction].concat((0,S.Z)(this.instructions)):this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(var n=0;n<t.length;n++)if(void 0===t[n].programId)throw new Error("Transaction instruction index ".concat(n," has undefined program id"));var i=[],a=[];t.forEach((function(e){e.keys.forEach((function(e){a.push(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){(0,x.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))}));var t=e.programId.toString();i.includes(t)||i.push(t)})),i.forEach((function(e){a.push({pubkey:new F(e),isSigner:!1,isWritable:!1})}));var s=[];a.forEach((function(e){var t=e.pubkey.toString(),r=s.findIndex((function(e){return e.pubkey.toString()===t}));r>-1?(s[r].isWritable=s[r].isWritable||e.isWritable,s[r].isSigner=s[r].isSigner||e.isSigner):s.push(e)})),s.sort((function(e,t){if(e.isSigner!==t.isSigner)return e.isSigner?-1:1;if(e.isWritable!==t.isWritable)return e.isWritable?-1:1;return e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})}));var o=s.findIndex((function(e){return e.pubkey.equals(r)}));if(o>-1){var u=s.splice(o,1),c=(0,v.Z)(u,1)[0];c.isSigner=!0,c.isWritable=!0,s.unshift(c)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});var l,d=be(this.signatures);try{var h=function(){var e=l.value,t=s.findIndex((function(t){return t.pubkey.equals(e.publicKey)}));if(!(t>-1))throw new Error("unknown signer: ".concat(e.publicKey.toString()));s[t].isSigner||(s[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))};for(d.s();!(l=d.n()).done;)h()}catch(e){d.e(e)}finally{d.f()}var f=0,p=0,y=0,b=[],m=[];s.forEach((function(e){var t=e.pubkey,r=e.isSigner,n=e.isWritable;r?(b.push(t.toString()),f+=1,n||(p+=1)):(m.push(t.toString()),n||(y+=1))}));var k=b.concat(m),w=t.map((function(e){var t=e.data,r=e.programId;return{programIdIndex:k.indexOf(r.toString()),accounts:e.keys.map((function(e){return k.indexOf(e.pubkey.toString())})),data:g().encode(t)}}));return w.forEach((function(e){ue(e.programIdIndex>=0),e.accounts.forEach((function(e){return ue(e>=0)}))})),new he({header:{numRequiredSignatures:f,numReadonlySignedAccounts:p,numReadonlyUnsignedAccounts:y},accountKeys:k,recentBlockhash:e,instructions:w})}},{key:"_compile",value:function(){var e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length&&this.signatures.every((function(e,r){return t[r].equals(e.publicKey)})))return e;return this.signatures=t.map((function(e){return{signature:null,publicKey:e}})),e}},{key:"serializeMessage",value:function(){return this._compile().serialize()}},{key:"getEstimatedFee",value:(t=(0,o.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFeeForMessage(this.compileMessage());case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setSigners",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");var n=new Set;this.signatures=t.filter((function(e){var t=e.toString();return!n.has(t)&&(n.add(t),!0)})).map((function(e){return{signature:null,publicKey:e}}))}},{key:"sign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");for(var n=new Set,i=[],a=0,s=t;a<s.length;a++){var o=s[a],u=o.publicKey.toString();n.has(u)||(n.add(u),i.push(o))}this.signatures=i.map((function(e){return{signature:null,publicKey:e.publicKey}}));var c=this._compile();this._partialSign.apply(this,[c].concat(i))}},{key:"partialSign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");for(var n=new Set,i=[],a=0,s=t;a<s.length;a++){var o=s[a],u=o.publicKey.toString();n.has(u)||(n.add(u),i.push(o))}var c=this._compile();this._partialSign.apply(this,[c].concat(i))}},{key:"_partialSign",value:function(e){for(var t=this,r=e.serialize(),n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];i.forEach((function(e){var n=K(r,e.secretKey);t._addSignature(e.publicKey,q(n))}))}},{key:"addSignature",value:function(e,t){this._compile(),this._addSignature(e,t)}},{key:"_addSignature",value:function(e,t){ue(64===t.length);var r=this.signatures.findIndex((function(t){return e.equals(t.publicKey)}));if(r<0)throw new Error("unknown signer: ".concat(e.toString()));this.signatures[r].signature=a.Buffer.from(t)}},{key:"verifySignatures",value:function(e){return this._verifySignatures(this.serializeMessage(),void 0===e||e)}},{key:"_verifySignatures",value:function(e,t){var r,n=be(this.signatures);try{for(n.s();!(r=n.n()).done;){var i=r.value,a=i.signature,s=i.publicKey;if(null===a){if(t)return!1}else if(!z(a,e,s.toBytes()))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"serialize",value:function(e){var t=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),r=t.requireAllSignatures,n=t.verifySignatures,i=this.serializeMessage();if(n&&!this._verifySignatures(i,r))throw new Error("Signature verification failed");return this._serialize(i)}},{key:"_serialize",value:function(e){var t=this.signatures,r=[];oe(r,t.length);var n=r.length+64*t.length+e.length,i=a.Buffer.alloc(n);return ue(t.length<256),a.Buffer.from(r).copy(i,0),t.forEach((function(e,t){var n=e.signature;null!==n&&(ue(64===n.length,"signature has invalid length"),a.Buffer.from(n).copy(i,r.length+64*t))})),e.copy(i,r.length+64*t.length),ue(i.length<=X,"Transaction too large: ".concat(i.length," > ").concat(X)),i}},{key:"keys",get:function(){return ue(1===this.instructions.length),this.instructions[0].keys.map((function(e){return e.pubkey}))}},{key:"programId",get:function(){return ue(1===this.instructions.length),this.instructions[0].programId}},{key:"data",get:function(){return ue(1===this.instructions.length),this.instructions[0].data}}],[{key:"from",value:function(t){for(var r=(0,S.Z)(t),n=se(r),i=[],s=0;s<n;s++){var o=r.slice(0,64);r=r.slice(64),i.push(g().encode(a.Buffer.from(o)))}return e.populate(he.from(r),i)}},{key:"populate",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new e;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),r.forEach((function(e,r){var i={signature:e==g().encode(we)?null:g().decode(e),publicKey:t.accountKeys[r]};n.signatures.push(i)})),t.instructions.forEach((function(e){var r=e.accounts.map((function(e){var r=t.accountKeys[e];return{pubkey:r,isSigner:n.signatures.some((function(e){return e.publicKey.toString()===r.toString()}))||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}}));n.instructions.push(new xe({keys:r,programId:t.accountKeys[e.programIdIndex],data:g().decode(e.data)}))})),n._message=t,n._json=n.toJSON(),n}}]),e}();function Ie(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _e=function(){function e(t){(0,n.Z)(this,e),this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}return(0,i.Z)(e,[{key:"compileToLegacyMessage",value:function(){return he.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}},{key:"compileToV0Message",value:function(e){return ye.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}],[{key:"decompile",value:function(t,r){var n=t.header,i=t.compiledInstructions,a=t.recentBlockhash,s=n.numRequiredSignatures,o=n.numReadonlySignedAccounts,u=n.numReadonlyUnsignedAccounts,c=s-o;ue(c>0,"Message header is invalid");var l=t.staticAccountKeys.length-s-u;ue(l>=0,"Message header is invalid");var d=t.getAccountKeys(r),h=d.get(0);if(void 0===h)throw new Error("Failed to decompile message because no account keys were found");var f,p=[],y=Ie(i);try{for(y.s();!(f=y.n()).done;){var g,b=f.value,m=[],k=Ie(b.accountKeyIndexes);try{for(k.s();!(g=k.n()).done;){var v=g.value,w=d.get(v);if(void 0===w)throw new Error("Failed to find key for account key index ".concat(v));var x=void 0;x=v<s?v<c:v<d.staticAccountKeys.length?v-s<l:v-d.staticAccountKeys.length<d.accountKeysFromLookups.writable.length,m.push({pubkey:w,isSigner:v<n.numRequiredSignatures,isWritable:x})}}catch(e){k.e(e)}finally{k.f()}var S=d.get(b.programIdIndex);if(void 0===S)throw new Error("Failed to find program id for program id index ".concat(b.programIdIndex));p.push(new xe({programId:S,data:q(b.data),keys:m}))}}catch(e){y.e(e)}finally{y.f()}return new e({payerKey:h,instructions:p,recentBlockhash:a})}}]),e}();function Be(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Re(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ee=function(){function e(t,r){if((0,n.Z)(this,e),this.signatures=void 0,this.message=void 0,void 0!==r)ue(r.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{for(var i=[],a=0;a<t.header.numRequiredSignatures;a++)i.push(new Uint8Array(64));this.signatures=i}this.message=t}return(0,i.Z)(e,[{key:"version",get:function(){return this.message.version}},{key:"serialize",value:function(){var e=this.message.serialize(),t=Array();oe(t,this.signatures.length);var r=k.n_([k.Ik(t.length,"encodedSignaturesLength"),k.A9(ne(),this.signatures.length,"signatures"),k.Ik(e.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,i)}},{key:"sign",value:function(e){var t,r=this,n=this.message.serialize(),i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures),a=Be(e);try{var s=function(){var e=t.value,a=i.findIndex((function(t){return t.equals(e.publicKey)}));ue(a>=0,"Cannot sign with non signer key ".concat(e.publicKey.toBase58())),r.signatures[a]=K(n,e.secretKey)};for(a.s();!(t=a.n()).done;)s()}catch(e){a.e(e)}finally{a.f()}}},{key:"addSignature",value:function(e,t){ue(64===t.byteLength,"Signature must be 64 bytes long");var r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex((function(t){return t.equals(e)}));ue(r>=0,"Can not add signature; `".concat(e.toBase58(),"` is not required to sign this transaction")),this.signatures[r]=t}}],[{key:"deserialize",value:function(t){for(var r=(0,S.Z)(t),n=[],i=se(r),a=0;a<i;a++)n.push(new Uint8Array(r.splice(0,64)));return new e(ge.deserialize(new Uint8Array(r)),n)}}]),e}(),Pe=new F("SysvarC1ock11111111111111111111111111111111"),Ze=(new F("SysvarEpochSchedu1e111111111111111111111111"),new F("Sysvar1nstructions1111111111111111111111111"),new F("SysvarRecentB1ockHashes11111111111111111111")),Te=new F("SysvarRent111111111111111111111111111111111"),Oe=(new F("SysvarRewards111111111111111111111111111111"),new F("SysvarS1otHashes111111111111111111111111111"),new F("SysvarS1otHistory11111111111111111111111111"),new F("SysvarStakeHistory1111111111111111111111111"));function Ce(e,t,r,n){return We.apply(this,arguments)}function We(){return We=(0,o.Z)(h().mark((function e(t,r,n,i){var a,s,o,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,maxRetries:i.maxRetries,minContextSlot:i.minContextSlot},e.next=3,t.sendTransaction(r,n,a);case 3:if(s=e.sent,null==r.recentBlockhash||null==r.lastValidBlockHeight){e.next=10;break}return e.next=7,t.confirmTransaction({abortSignal:null==i?void 0:i.abortSignal,signature:s,blockhash:r.recentBlockhash,lastValidBlockHeight:r.lastValidBlockHeight},i&&i.commitment);case 7:o=e.sent.value,e.next=22;break;case 10:if(null==r.minNonceContextSlot||null==r.nonceInfo){e.next=18;break}return u=r.nonceInfo.nonceInstruction,c=u.keys[0].pubkey,e.next=15,t.confirmTransaction({abortSignal:null==i?void 0:i.abortSignal,minContextSlot:r.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:r.nonceInfo.nonce,signature:s},i&&i.commitment);case 15:o=e.sent.value,e.next=22;break;case 18:return null!=(null==i?void 0:i.abortSignal)&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),e.next=21,t.confirmTransaction(s,i&&i.commitment);case 21:o=e.sent.value;case 22:if(!o.err){e.next=24;break}throw new Error("Transaction ".concat(s," failed (").concat(JSON.stringify(o),")"));case 24:return e.abrupt("return",s);case 25:case"end":return e.stop()}}),e)}))),We.apply(this,arguments)}function Le(e){return new Promise((function(t){return setTimeout(t,e)}))}function Ue(e,t){var r=e.layout.span>=0?e.layout.span:ae(e,t),n=a.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}var Ke,ze=k._O("lamportsPerSignature"),qe=k.n_([k.Jq("version"),k.Jq("state"),re("authorizedPubkey"),re("nonce"),k.n_([ze],"feeCalculator")]),je=qe.span,Ne=function(){function e(t){(0,n.Z)(this,e),this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}return(0,i.Z)(e,null,[{key:"fromAccountData",value:function(t){var r=qe.decode(q(t),0);return new e({authorizedPubkey:new F(r.authorizedPubkey),nonce:new F(r.nonce).toString(),feeCalculator:r.feeCalculator})}}]),e}(),Me=(Ke=8,function(e){var t=(0,k.Ik)(Ke,e),r=function(e){return{decode:e.decode.bind(e),encode:e.encode.bind(e)}}(t),n=r.encode,i=r.decode,s=t;return s.decode=function(e,t){var r=i(e,t);return(0,w.oU)(a.Buffer.from(r))},s.encode=function(e,t,r){var i=(0,w.k$)(e,Ke);return n(i,t,r)},s}),Ge=Object.freeze({Create:{index:0,layout:k.n_([k.Jq("instruction"),k.gM("lamports"),k.gM("space"),re("programId")])},Assign:{index:1,layout:k.n_([k.Jq("instruction"),re("programId")])},Transfer:{index:2,layout:k.n_([k.Jq("instruction"),Me("lamports")])},CreateWithSeed:{index:3,layout:k.n_([k.Jq("instruction"),re("base"),ie("seed"),k.gM("lamports"),k.gM("space"),re("programId")])},AdvanceNonceAccount:{index:4,layout:k.n_([k.Jq("instruction")])},WithdrawNonceAccount:{index:5,layout:k.n_([k.Jq("instruction"),k.gM("lamports")])},InitializeNonceAccount:{index:6,layout:k.n_([k.Jq("instruction"),re("authorized")])},AuthorizeNonceAccount:{index:7,layout:k.n_([k.Jq("instruction"),re("authorized")])},Allocate:{index:8,layout:k.n_([k.Jq("instruction"),k.gM("space")])},AllocateWithSeed:{index:9,layout:k.n_([k.Jq("instruction"),re("base"),ie("seed"),k.gM("space"),re("programId")])},AssignWithSeed:{index:10,layout:k.n_([k.Jq("instruction"),re("base"),ie("seed"),re("programId")])},TransferWithSeed:{index:11,layout:k.n_([k.Jq("instruction"),Me("lamports"),ie("seed"),re("programId")])},UpgradeNonceAccount:{index:12,layout:k.n_([k.Jq("instruction")])}}),De=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"createAccount",value:function(e){var t=Ue(Ge.Create,{lamports:e.lamports,space:e.space,programId:q(e.programId.toBuffer())});return new xe({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}},{key:"transfer",value:function(e){var t,r;"basePubkey"in e?(t=Ue(Ge.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:q(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]):(t=Ue(Ge.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]);return new xe({keys:r,programId:this.programId,data:t})}},{key:"assign",value:function(e){var t,r;"basePubkey"in e?(t=Ue(Ge.AssignWithSeed,{base:q(e.basePubkey.toBuffer()),seed:e.seed,programId:q(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Ue(Ge.Assign,{programId:q(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]);return new xe({keys:r,programId:this.programId,data:t})}},{key:"createAccountWithSeed",value:function(e){var t=Ue(Ge.CreateWithSeed,{base:q(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:q(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new xe({keys:r,programId:this.programId,data:t})}},{key:"createNonceAccount",value:function(t){var r=new Se;"basePubkey"in t&&"seed"in t?r.add(e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:je,programId:this.programId})):r.add(e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:je,programId:this.programId}));var n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}},{key:"nonceInitialize",value:function(e){var t=Ue(Ge.InitializeNonceAccount,{authorized:q(e.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:Te,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new xe(r)}},{key:"nonceAdvance",value:function(e){var t=Ue(Ge.AdvanceNonceAccount),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new xe(r)}},{key:"nonceWithdraw",value:function(e){var t=Ue(Ge.WithdrawNonceAccount,{lamports:e.lamports});return new xe({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Ze,isSigner:!1,isWritable:!1},{pubkey:Te,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"nonceAuthorize",value:function(e){var t=Ue(Ge.AuthorizeNonceAccount,{authorized:q(e.newAuthorizedPubkey.toBuffer())});return new xe({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"allocate",value:function(e){var t,r;"basePubkey"in e?(t=Ue(Ge.AllocateWithSeed,{base:q(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:q(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Ue(Ge.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]);return new xe({keys:r,programId:this.programId,data:t})}}]),e}();De.programId=new F("11111111111111111111111111111111");var Je=function(){function e(){(0,n.Z)(this,e)}var t;return(0,i.Z)(e,null,[{key:"getMinNumSignatures",value:function(t){return 2*(Math.ceil(t/e.chunkSize)+1+1)}},{key:"load",value:(t=(0,o.Z)(h().mark((function t(r,n,i,s,o){var u,c,l,d,f,p,y,g,b,m,v,w,x,S,I,A,_,B,R;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getMinimumBalanceForRentExemption(o.length);case 2:return u=t.sent,t.next=5,r.getAccountInfo(i.publicKey,"confirmed");case 5:if(c=t.sent,l=null,null===c){t.next=16;break}if(!c.executable){t.next=11;break}return console.error("Program load failed, account is already executable"),t.abrupt("return",!1);case 11:c.data.length!==o.length&&(l=l||new Se).add(De.allocate({accountPubkey:i.publicKey,space:o.length})),c.owner.equals(s)||(l=l||new Se).add(De.assign({accountPubkey:i.publicKey,programId:s})),c.lamports<u&&(l=l||new Se).add(De.transfer({fromPubkey:n.publicKey,toPubkey:i.publicKey,lamports:u-c.lamports})),t.next=17;break;case 16:l=(new Se).add(De.createAccount({fromPubkey:n.publicKey,newAccountPubkey:i.publicKey,lamports:u>0?u:1,space:o.length,programId:s}));case 17:if(null===l){t.next=20;break}return t.next=20,Ce(r,l,[n,i],{commitment:"confirmed"});case 20:d=k.n_([k.Jq("instruction"),k.Jq("offset"),k.Jq("bytesLength"),k.Jq("bytesLengthPadding"),k.A9(k.u8("byte"),k.cv(k.Jq(),-8),"bytes")]),f=e.chunkSize,p=0,y=o,g=[];case 25:if(!(y.length>0)){t.next=39;break}if(b=y.slice(0,f),m=a.Buffer.alloc(f+16),d.encode({instruction:0,offset:p,bytes:b,bytesLength:0,bytesLengthPadding:0},m),v=(new Se).add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:m}),g.push(Ce(r,v,[n,i],{commitment:"confirmed"})),!r._rpcEndpoint.includes("solana.com")){t.next=35;break}return t.next=35,Le(250);case 35:p+=f,y=y.slice(f),t.next=25;break;case 39:return t.next=41,Promise.all(g);case 41:return w=k.n_([k.Jq("instruction")]),x=a.Buffer.alloc(w.span),w.encode({instruction:1},x),S=(new Se).add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0},{pubkey:Te,isSigner:!1,isWritable:!1}],programId:s,data:x}),I="processed",t.next=48,r.sendTransaction(S,[n,i],{preflightCommitment:I});case 48:return A=t.sent,t.next=51,r.confirmTransaction({signature:A,lastValidBlockHeight:S.lastValidBlockHeight,blockhash:S.recentBlockhash},I);case 51:if(_=t.sent,B=_.context,!(R=_.value).err){t.next=56;break}throw new Error("Transaction ".concat(A," failed (").concat(JSON.stringify(R),")"));case 56:return t.prev=57,t.next=60,r.getSlot({commitment:I});case 60:if(!(t.sent>B.slot)){t.next=63;break}return t.abrupt("break",71);case 63:t.next=67;break;case 65:t.prev=65,t.t0=t.catch(57);case 67:return t.next=69,new Promise((function(e){return setTimeout(e,Math.round(200))}));case 69:t.next=56;break;case 71:return t.abrupt("return",!0);case 72:case"end":return t.stop()}}),t,null,[[57,65]])}))),function(e,r,n,i,a){return t.apply(this,arguments)})}]),e}();Je.chunkSize=932;new F("BPFLoader2111111111111111111111111111111111");function Fe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xe=Object.prototype.toString,He=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function Ve(e,t){var r,n,i,a,s,o,u;if(!0===e)return"true";if(!1===e)return"false";switch(typeof e){case"object":if(null===e)return null;if(e.toJSON&&"function"==typeof e.toJSON)return Ve(e.toJSON(),t);if("[object Array]"===(u=Xe.call(e))){for(i="[",n=e.length-1,r=0;r<n;r++)i+=Ve(e[r],!0)+",";return n>-1&&(i+=Ve(e[r],!0)),i+"]"}if("[object Object]"===u){for(n=(a=He(e).sort()).length,i="",r=0;r<n;)void 0!==(o=Ve(e[s=a[r]],!1))&&(i&&(i+=","),i+=JSON.stringify(s)+":"+o),r++;return"{"+i+"}"}return JSON.stringify(e);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(e);default:return isFinite(e)?e:null}}var $e=Fe((function(e){var t=Ve(e,!1);if(void 0!==t)return""+t}));function Qe(e){for(var t=0;e>1;)e/=2,t++;return t}var Ye=function(){function e(t,r,i,a,s){(0,n.Z)(this,e),this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=r,this.warmup=i,this.firstNormalEpoch=a,this.firstNormalSlot=s}return(0,i.Z)(e,[{key:"getEpoch",value:function(e){return this.getEpochAndSlotIndex(e)[0]}},{key:"getEpochAndSlotIndex",value:function(e){if(e<this.firstNormalSlot){var t=Qe(0===(r=e+32+1)?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,1+(r|=r>>32)))-Qe(32)-1;return[t,e-(this.getSlotsInEpoch(t)-32)]}var r,n=e-this.firstNormalSlot,i=Math.floor(n/this.slotsPerEpoch);return[this.firstNormalEpoch+i,n%this.slotsPerEpoch]}},{key:"getFirstSlotInEpoch",value:function(e){return e<=this.firstNormalEpoch?32*(Math.pow(2,e)-1):(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}},{key:"getLastSlotInEpoch",value:function(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}},{key:"getSlotsInEpoch",value:function(e){return e<this.firstNormalEpoch?Math.pow(2,e+Qe(32)):this.slotsPerEpoch}}]),e}();function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var tt=function(e){(0,u.Z)(r,e);var t=et(r);function r(e,i){var a;return(0,n.Z)(this,r),(a=t.call(this,e)).logs=void 0,a.logs=i,a}return(0,i.Z)(r)}((0,E.Z)(Error)),rt=function(e){(0,u.Z)(r,e);var t=et(r);function r(e,i){var a,s=e.code,o=e.message,u=e.data;return(0,n.Z)(this,r),(a=t.call(this,null!=i?"".concat(i,": ").concat(o):o)).code=void 0,a.data=void 0,a.code=s,a.data=u,a.name="SolanaJSONRPCError",a}return(0,i.Z)(r)}((0,E.Z)(Error)),nt=globalThis.fetch;function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var st=function(e){(0,u.Z)(r,e);var t=at(r);function r(e,i,a){var s;(0,n.Z)(this,r);return s=t.call(this,(function(e){var t=(0,T.Z)(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?it(Object(r),!0).forEach((function(t){(0,x.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3},i));return s.underlyingSocket="socket"in t?t.socket:t,t}),e,i,a),s.underlyingSocket=void 0,s}return(0,i.Z)(r,[{key:"call",value:function(){for(var e,t,n=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return 1===n?(t=(0,P.Z)((0,l.Z)(r.prototype),"call",this)).call.apply(t,[this].concat(a)):Promise.reject(new Error("Tried to call a JSON-RPC method `"+a[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}},{key:"notify",value:function(){for(var e,t,n=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return 1===n?(t=(0,P.Z)((0,l.Z)(r.prototype),"notify",this)).call.apply(t,[this].concat(a)):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+a[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}]),r}(Z.Z);var ot,ut=function(){function e(t){(0,n.Z)(this,e),this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}return(0,i.Z)(e,[{key:"isActive",value:function(){var e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}}],[{key:"deserialize",value:function(e){var t=function(e,t){var r;try{r=e.layout.decode(t)}catch(e){throw new Error("invalid instruction; "+e)}if(r.typeIndex!==e.index)throw new Error("invalid account data; account type mismatch ".concat(r.typeIndex," != ").concat(e.index));return r}(ct,e),r=e.length-56;ue(r>=0,"lookup table is invalid"),ue(r%32==0,"lookup table is invalid");var n=r/32,i=k.n_([k.A9(re(),n,"addresses")]).decode(e.slice(56)).addresses;return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new F(t.authority[0]):void 0,addresses:i.map((function(e){return new F(e)}))}}}]),e}(),ct={index:1,layout:k.n_([k.Jq("typeIndex"),Me("deactivationSlot"),k._O("lastExtendedSlot"),k.u8("lastExtendedStartIndex"),k.u8(),k.A9(re(),k.cv(k.u8(),-1),"authority")])},lt=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;var dt=["commitment"],ht=["encoding"],ft=["commitment"],pt=["commitment"];function yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(r),!0).forEach((function(t){(0,x.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var bt=(0,_.oQ)((0,_.eE)(F),(0,_.Z_)(),(function(e){return new F(e)})),mt=(0,_.bc)([(0,_.Z_)(),(0,_.i0)("base64")]),kt=(0,_.oQ)((0,_.eE)(a.Buffer),mt,(function(e){return a.Buffer.from(e[0],"base64")}));function vt(e){var t,r;if("string"==typeof e)t=e;else if(e){t=e.commitment,r=(0,A.Z)(e,dt)}return{commitment:t,config:r}}function wt(e){return(0,_.G0)([(0,_.dt)({jsonrpc:(0,_.i0)("2.0"),id:(0,_.Z_)(),result:e}),(0,_.dt)({jsonrpc:(0,_.i0)("2.0"),id:(0,_.Z_)(),error:(0,_.dt)({code:(0,_._4)(),message:(0,_.Z_)(),data:(0,_.jt)((0,_.Yj)())})})])}var xt=wt((0,_._4)());function St(e){return(0,_.oQ)(wt(e),xt,(function(t){return"error"in t?t:gt(gt({},t),{},{result:(0,_.Ue)(t.result,e)})}))}function It(e){return St((0,_.dt)({context:(0,_.dt)({slot:(0,_.Rx)()}),value:e}))}function At(e){return(0,_.dt)({context:(0,_.dt)({slot:(0,_.Rx)()}),value:e})}function _t(e,t){return 0===e?new ye({header:t.header,staticAccountKeys:t.accountKeys.map((function(e){return new F(e)})),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map((function(e){return{programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:g().decode(e.data)}})),addressTableLookups:t.addressTableLookups}):new he(t)}var Bt=(0,_.dt)({foundation:(0,_.Rx)(),foundationTerm:(0,_.Rx)(),initial:(0,_.Rx)(),taper:(0,_.Rx)(),terminal:(0,_.Rx)()}),Rt=St((0,_.IX)((0,_.AG)((0,_.dt)({epoch:(0,_.Rx)(),effectiveSlot:(0,_.Rx)(),amount:(0,_.Rx)(),postBalance:(0,_.Rx)(),commission:(0,_.jt)((0,_.AG)((0,_.Rx)()))})))),Et=(0,_.IX)((0,_.dt)({slot:(0,_.Rx)(),prioritizationFee:(0,_.Rx)()})),Pt=(0,_.dt)({total:(0,_.Rx)(),validator:(0,_.Rx)(),foundation:(0,_.Rx)(),epoch:(0,_.Rx)()}),Zt=(0,_.dt)({epoch:(0,_.Rx)(),slotIndex:(0,_.Rx)(),slotsInEpoch:(0,_.Rx)(),absoluteSlot:(0,_.Rx)(),blockHeight:(0,_.jt)((0,_.Rx)()),transactionCount:(0,_.jt)((0,_.Rx)())}),Tt=(0,_.dt)({slotsPerEpoch:(0,_.Rx)(),leaderScheduleSlotOffset:(0,_.Rx)(),warmup:(0,_.O7)(),firstNormalEpoch:(0,_.Rx)(),firstNormalSlot:(0,_.Rx)()}),Ot=(0,_.IM)((0,_.Z_)(),(0,_.IX)((0,_.Rx)())),Ct=(0,_.AG)((0,_.G0)([(0,_.dt)({}),(0,_.Z_)()])),Wt=(0,_.dt)({err:Ct}),Lt=(0,_.i0)("receivedSignature"),Ut=(0,_.dt)({"solana-core":(0,_.Z_)(),"feature-set":(0,_.jt)((0,_.Rx)())}),Kt=It((0,_.dt)({err:(0,_.AG)((0,_.G0)([(0,_.dt)({}),(0,_.Z_)()])),logs:(0,_.AG)((0,_.IX)((0,_.Z_)())),accounts:(0,_.jt)((0,_.AG)((0,_.IX)((0,_.AG)((0,_.dt)({executable:(0,_.O7)(),owner:(0,_.Z_)(),lamports:(0,_.Rx)(),data:(0,_.IX)((0,_.Z_)()),rentEpoch:(0,_.jt)((0,_.Rx)())}))))),unitsConsumed:(0,_.jt)((0,_.Rx)()),returnData:(0,_.jt)((0,_.AG)((0,_.dt)({programId:(0,_.Z_)(),data:(0,_.bc)([(0,_.Z_)(),(0,_.i0)("base64")])})))})),zt=It((0,_.dt)({byIdentity:(0,_.IM)((0,_.Z_)(),(0,_.IX)((0,_.Rx)())),range:(0,_.dt)({firstSlot:(0,_.Rx)(),lastSlot:(0,_.Rx)()})}));var qt=St(Bt),jt=St(Pt),Nt=St(Et),Mt=St(Zt),Gt=St(Tt),Dt=St(Ot),Jt=St((0,_.Rx)()),Ft=It((0,_.dt)({total:(0,_.Rx)(),circulating:(0,_.Rx)(),nonCirculating:(0,_.Rx)(),nonCirculatingAccounts:(0,_.IX)(bt)})),Xt=(0,_.dt)({amount:(0,_.Z_)(),uiAmount:(0,_.AG)((0,_.Rx)()),decimals:(0,_.Rx)(),uiAmountString:(0,_.jt)((0,_.Z_)())}),Ht=It((0,_.IX)((0,_.dt)({address:bt,amount:(0,_.Z_)(),uiAmount:(0,_.AG)((0,_.Rx)()),decimals:(0,_.Rx)(),uiAmountString:(0,_.jt)((0,_.Z_)())}))),Vt=It((0,_.IX)((0,_.dt)({pubkey:bt,account:(0,_.dt)({executable:(0,_.O7)(),owner:bt,lamports:(0,_.Rx)(),data:kt,rentEpoch:(0,_.Rx)()})}))),$t=(0,_.dt)({program:(0,_.Z_)(),parsed:(0,_._4)(),space:(0,_.Rx)()}),Qt=It((0,_.IX)((0,_.dt)({pubkey:bt,account:(0,_.dt)({executable:(0,_.O7)(),owner:bt,lamports:(0,_.Rx)(),data:$t,rentEpoch:(0,_.Rx)()})}))),Yt=It((0,_.IX)((0,_.dt)({lamports:(0,_.Rx)(),address:bt}))),er=(0,_.dt)({executable:(0,_.O7)(),owner:bt,lamports:(0,_.Rx)(),data:kt,rentEpoch:(0,_.Rx)()}),tr=(0,_.dt)({pubkey:bt,account:er}),rr=(0,_.oQ)((0,_.G0)([(0,_.eE)(a.Buffer),$t]),(0,_.G0)([mt,$t]),(function(e){return Array.isArray(e)?(0,_.Ue)(e,kt):e})),nr=(0,_.dt)({executable:(0,_.O7)(),owner:bt,lamports:(0,_.Rx)(),data:rr,rentEpoch:(0,_.Rx)()}),ir=(0,_.dt)({pubkey:bt,account:nr}),ar=(0,_.dt)({state:(0,_.G0)([(0,_.i0)("active"),(0,_.i0)("inactive"),(0,_.i0)("activating"),(0,_.i0)("deactivating")]),active:(0,_.Rx)(),inactive:(0,_.Rx)()}),sr=St((0,_.IX)((0,_.dt)({signature:(0,_.Z_)(),slot:(0,_.Rx)(),err:Ct,memo:(0,_.AG)((0,_.Z_)()),blockTime:(0,_.jt)((0,_.AG)((0,_.Rx)()))}))),or=St((0,_.IX)((0,_.dt)({signature:(0,_.Z_)(),slot:(0,_.Rx)(),err:Ct,memo:(0,_.AG)((0,_.Z_)()),blockTime:(0,_.jt)((0,_.AG)((0,_.Rx)()))}))),ur=(0,_.dt)({subscription:(0,_.Rx)(),result:At(er)}),cr=(0,_.dt)({pubkey:bt,account:er}),lr=(0,_.dt)({subscription:(0,_.Rx)(),result:At(cr)}),dr=(0,_.dt)({parent:(0,_.Rx)(),slot:(0,_.Rx)(),root:(0,_.Rx)()}),hr=(0,_.dt)({subscription:(0,_.Rx)(),result:dr}),fr=(0,_.G0)([(0,_.dt)({type:(0,_.G0)([(0,_.i0)("firstShredReceived"),(0,_.i0)("completed"),(0,_.i0)("optimisticConfirmation"),(0,_.i0)("root")]),slot:(0,_.Rx)(),timestamp:(0,_.Rx)()}),(0,_.dt)({type:(0,_.i0)("createdBank"),parent:(0,_.Rx)(),slot:(0,_.Rx)(),timestamp:(0,_.Rx)()}),(0,_.dt)({type:(0,_.i0)("frozen"),slot:(0,_.Rx)(),timestamp:(0,_.Rx)(),stats:(0,_.dt)({numTransactionEntries:(0,_.Rx)(),numSuccessfulTransactions:(0,_.Rx)(),numFailedTransactions:(0,_.Rx)(),maxTransactionsPerEntry:(0,_.Rx)()})}),(0,_.dt)({type:(0,_.i0)("dead"),slot:(0,_.Rx)(),timestamp:(0,_.Rx)(),err:(0,_.Z_)()})]),pr=(0,_.dt)({subscription:(0,_.Rx)(),result:fr}),yr=(0,_.dt)({subscription:(0,_.Rx)(),result:At((0,_.G0)([Wt,Lt]))}),gr=(0,_.dt)({subscription:(0,_.Rx)(),result:(0,_.Rx)()}),br=(0,_.dt)({pubkey:(0,_.Z_)(),gossip:(0,_.AG)((0,_.Z_)()),tpu:(0,_.AG)((0,_.Z_)()),rpc:(0,_.AG)((0,_.Z_)()),version:(0,_.AG)((0,_.Z_)())}),mr=(0,_.dt)({votePubkey:(0,_.Z_)(),nodePubkey:(0,_.Z_)(),activatedStake:(0,_.Rx)(),epochVoteAccount:(0,_.O7)(),epochCredits:(0,_.IX)((0,_.bc)([(0,_.Rx)(),(0,_.Rx)(),(0,_.Rx)()])),commission:(0,_.Rx)(),lastVote:(0,_.Rx)(),rootSlot:(0,_.AG)((0,_.Rx)())}),kr=St((0,_.dt)({current:(0,_.IX)(mr),delinquent:(0,_.IX)(mr)})),vr=(0,_.G0)([(0,_.i0)("processed"),(0,_.i0)("confirmed"),(0,_.i0)("finalized")]),wr=(0,_.dt)({slot:(0,_.Rx)(),confirmations:(0,_.AG)((0,_.Rx)()),err:Ct,confirmationStatus:(0,_.jt)(vr)}),xr=It((0,_.IX)((0,_.AG)(wr))),Sr=St((0,_.Rx)()),Ir=(0,_.dt)({accountKey:bt,writableIndexes:(0,_.IX)((0,_.Rx)()),readonlyIndexes:(0,_.IX)((0,_.Rx)())}),Ar=(0,_.dt)({signatures:(0,_.IX)((0,_.Z_)()),message:(0,_.dt)({accountKeys:(0,_.IX)((0,_.Z_)()),header:(0,_.dt)({numRequiredSignatures:(0,_.Rx)(),numReadonlySignedAccounts:(0,_.Rx)(),numReadonlyUnsignedAccounts:(0,_.Rx)()}),instructions:(0,_.IX)((0,_.dt)({accounts:(0,_.IX)((0,_.Rx)()),data:(0,_.Z_)(),programIdIndex:(0,_.Rx)()})),recentBlockhash:(0,_.Z_)(),addressTableLookups:(0,_.jt)((0,_.IX)(Ir))})}),_r=(0,_.dt)({pubkey:bt,signer:(0,_.O7)(),writable:(0,_.O7)(),source:(0,_.jt)((0,_.G0)([(0,_.i0)("transaction"),(0,_.i0)("lookupTable")]))}),Br=(0,_.dt)({accountKeys:(0,_.IX)(_r),signatures:(0,_.IX)((0,_.Z_)())}),Rr=(0,_.dt)({parsed:(0,_._4)(),program:(0,_.Z_)(),programId:bt}),Er=(0,_.dt)({accounts:(0,_.IX)(bt),data:(0,_.Z_)(),programId:bt}),Pr=(0,_.G0)([Er,Rr]),Zr=(0,_.G0)([(0,_.dt)({parsed:(0,_._4)(),program:(0,_.Z_)(),programId:(0,_.Z_)()}),(0,_.dt)({accounts:(0,_.IX)((0,_.Z_)()),data:(0,_.Z_)(),programId:(0,_.Z_)()})]),Tr=(0,_.oQ)(Pr,Zr,(function(e){return"accounts"in e?(0,_.Ue)(e,Er):(0,_.Ue)(e,Rr)})),Or=(0,_.dt)({signatures:(0,_.IX)((0,_.Z_)()),message:(0,_.dt)({accountKeys:(0,_.IX)(_r),instructions:(0,_.IX)(Tr),recentBlockhash:(0,_.Z_)(),addressTableLookups:(0,_.jt)((0,_.AG)((0,_.IX)(Ir)))})}),Cr=(0,_.dt)({accountIndex:(0,_.Rx)(),mint:(0,_.Z_)(),owner:(0,_.jt)((0,_.Z_)()),uiTokenAmount:Xt}),Wr=(0,_.dt)({writable:(0,_.IX)(bt),readonly:(0,_.IX)(bt)}),Lr=(0,_.dt)({err:Ct,fee:(0,_.Rx)(),innerInstructions:(0,_.jt)((0,_.AG)((0,_.IX)((0,_.dt)({index:(0,_.Rx)(),instructions:(0,_.IX)((0,_.dt)({accounts:(0,_.IX)((0,_.Rx)()),data:(0,_.Z_)(),programIdIndex:(0,_.Rx)()}))})))),preBalances:(0,_.IX)((0,_.Rx)()),postBalances:(0,_.IX)((0,_.Rx)()),logMessages:(0,_.jt)((0,_.AG)((0,_.IX)((0,_.Z_)()))),preTokenBalances:(0,_.jt)((0,_.AG)((0,_.IX)(Cr))),postTokenBalances:(0,_.jt)((0,_.AG)((0,_.IX)(Cr))),loadedAddresses:(0,_.jt)(Wr),computeUnitsConsumed:(0,_.jt)((0,_.Rx)())}),Ur=(0,_.dt)({err:Ct,fee:(0,_.Rx)(),innerInstructions:(0,_.jt)((0,_.AG)((0,_.IX)((0,_.dt)({index:(0,_.Rx)(),instructions:(0,_.IX)(Tr)})))),preBalances:(0,_.IX)((0,_.Rx)()),postBalances:(0,_.IX)((0,_.Rx)()),logMessages:(0,_.jt)((0,_.AG)((0,_.IX)((0,_.Z_)()))),preTokenBalances:(0,_.jt)((0,_.AG)((0,_.IX)(Cr))),postTokenBalances:(0,_.jt)((0,_.AG)((0,_.IX)(Cr))),loadedAddresses:(0,_.jt)(Wr),computeUnitsConsumed:(0,_.jt)((0,_.Rx)())}),Kr=(0,_.G0)([(0,_.i0)(0),(0,_.i0)("legacy")]),zr=(0,_.dt)({pubkey:(0,_.Z_)(),lamports:(0,_.Rx)(),postBalance:(0,_.AG)((0,_.Rx)()),rewardType:(0,_.AG)((0,_.Z_)()),commission:(0,_.jt)((0,_.AG)((0,_.Rx)()))}),qr=St((0,_.AG)((0,_.dt)({blockhash:(0,_.Z_)(),previousBlockhash:(0,_.Z_)(),parentSlot:(0,_.Rx)(),transactions:(0,_.IX)((0,_.dt)({transaction:Ar,meta:(0,_.AG)(Lr),version:(0,_.jt)(Kr)})),rewards:(0,_.jt)((0,_.IX)(zr)),blockTime:(0,_.AG)((0,_.Rx)()),blockHeight:(0,_.AG)((0,_.Rx)())}))),jr=St((0,_.AG)((0,_.dt)({blockhash:(0,_.Z_)(),previousBlockhash:(0,_.Z_)(),parentSlot:(0,_.Rx)(),rewards:(0,_.jt)((0,_.IX)(zr)),blockTime:(0,_.AG)((0,_.Rx)()),blockHeight:(0,_.AG)((0,_.Rx)())}))),Nr=St((0,_.AG)((0,_.dt)({blockhash:(0,_.Z_)(),previousBlockhash:(0,_.Z_)(),parentSlot:(0,_.Rx)(),transactions:(0,_.IX)((0,_.dt)({transaction:Br,meta:(0,_.AG)(Lr),version:(0,_.jt)(Kr)})),rewards:(0,_.jt)((0,_.IX)(zr)),blockTime:(0,_.AG)((0,_.Rx)()),blockHeight:(0,_.AG)((0,_.Rx)())}))),Mr=St((0,_.AG)((0,_.dt)({blockhash:(0,_.Z_)(),previousBlockhash:(0,_.Z_)(),parentSlot:(0,_.Rx)(),transactions:(0,_.IX)((0,_.dt)({transaction:Or,meta:(0,_.AG)(Ur),version:(0,_.jt)(Kr)})),rewards:(0,_.jt)((0,_.IX)(zr)),blockTime:(0,_.AG)((0,_.Rx)()),blockHeight:(0,_.AG)((0,_.Rx)())}))),Gr=St((0,_.AG)((0,_.dt)({blockhash:(0,_.Z_)(),previousBlockhash:(0,_.Z_)(),parentSlot:(0,_.Rx)(),transactions:(0,_.IX)((0,_.dt)({transaction:Br,meta:(0,_.AG)(Ur),version:(0,_.jt)(Kr)})),rewards:(0,_.jt)((0,_.IX)(zr)),blockTime:(0,_.AG)((0,_.Rx)()),blockHeight:(0,_.AG)((0,_.Rx)())}))),Dr=St((0,_.AG)((0,_.dt)({blockhash:(0,_.Z_)(),previousBlockhash:(0,_.Z_)(),parentSlot:(0,_.Rx)(),rewards:(0,_.jt)((0,_.IX)(zr)),blockTime:(0,_.AG)((0,_.Rx)()),blockHeight:(0,_.AG)((0,_.Rx)())}))),Jr=St((0,_.AG)((0,_.dt)({blockhash:(0,_.Z_)(),previousBlockhash:(0,_.Z_)(),parentSlot:(0,_.Rx)(),transactions:(0,_.IX)((0,_.dt)({transaction:Ar,meta:(0,_.AG)(Lr)})),rewards:(0,_.jt)((0,_.IX)(zr)),blockTime:(0,_.AG)((0,_.Rx)())}))),Fr=St((0,_.AG)((0,_.dt)({blockhash:(0,_.Z_)(),previousBlockhash:(0,_.Z_)(),parentSlot:(0,_.Rx)(),signatures:(0,_.IX)((0,_.Z_)()),blockTime:(0,_.AG)((0,_.Rx)())}))),Xr=St((0,_.AG)((0,_.dt)({slot:(0,_.Rx)(),meta:Lr,blockTime:(0,_.jt)((0,_.AG)((0,_.Rx)())),transaction:Ar,version:(0,_.jt)(Kr)}))),Hr=St((0,_.AG)((0,_.dt)({slot:(0,_.Rx)(),transaction:Or,meta:(0,_.AG)(Ur),blockTime:(0,_.jt)((0,_.AG)((0,_.Rx)())),version:(0,_.jt)(Kr)}))),Vr=It((0,_.dt)({blockhash:(0,_.Z_)(),feeCalculator:(0,_.dt)({lamportsPerSignature:(0,_.Rx)()})})),$r=It((0,_.dt)({blockhash:(0,_.Z_)(),lastValidBlockHeight:(0,_.Rx)()})),Qr=It((0,_.O7)()),Yr=(0,_.dt)({slot:(0,_.Rx)(),numTransactions:(0,_.Rx)(),numSlots:(0,_.Rx)(),samplePeriodSecs:(0,_.Rx)()}),en=St((0,_.IX)(Yr)),tn=It((0,_.AG)((0,_.dt)({feeCalculator:(0,_.dt)({lamportsPerSignature:(0,_.Rx)()})}))),rn=St((0,_.Z_)()),nn=St((0,_.Z_)()),an=(0,_.dt)({err:Ct,logs:(0,_.IX)((0,_.Z_)()),signature:(0,_.Z_)()}),sn=(0,_.dt)({result:At(an),subscription:(0,_.Rx)()}),on={"solana-client":"js/".concat(null!==(ot="0.0.0-development")?ot:"UNKNOWN")},un=function(){function e(t,r){var i,a,s,u,c,l,d,f,p=this;(0,n.Z)(this,e),this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(i={},function(){var e=(0,o.Z)(h().mark((function e(t){var r,n,a,s,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vt(t),a=n.commitment,s=n.config,u=p._buildArgs([],a,void 0,s),c=$e(u),i[c]=null!==(r=i[c])&&void 0!==r?r:(0,o.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p._rpcRequest("getBlockHeight",u);case 3:if(t=e.sent,!("error"in(r=(0,_.Ue)(t,St((0,_.Rx)()))))){e.next=7;break}throw new rt(r.error,"failed to get block height information");case 7:return e.abrupt("return",r.result);case 8:return e.prev=8,delete i[c],e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,,8,11]])})))(),e.next=6,i[c];case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r&&"string"==typeof r?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,a=r.wsEndpoint,s=r.httpHeaders,u=r.fetch,c=r.fetchMiddleware,l=r.disableRetryOnRateLimit,d=r.httpAgent),this._rpcEndpoint=function(e){if(!1===/^https?:/.test(e))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}(t),this._rpcWsEndpoint=a||function(e){var t=e.match(lt);if(null==t)throw TypeError("Failed to validate endpoint URL `".concat(e,"`"));var r=(0,v.Z)(t,4);r[0];var n=r[1],i=r[2],a=r[3],s=e.startsWith("https:")?"wss:":"ws:",o=null==i?null:parseInt(i.slice(1),10),u=null==o?"":":".concat(o+1);return"".concat(s,"//").concat(n).concat(u).concat(a)}(t),this._rpcClient=function(e,t,r,n,i,a){var s,u=r||nt;null!=a&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(s=function(){var e=(0,o.Z)(h().mark((function e(t,r){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,i){try{n(t,r,(function(t,r){return e([t,r])}))}catch(e){i(e)}}));case 2:return i=e.sent,e.next=5,u.apply(void 0,(0,S.Z)(i));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());var c=new(R())(function(){var r=(0,o.Z)(h().mark((function r(n,a){var o,c,l,d,f;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o={method:"POST",body:n,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},t||{},on)},r.prev=1,c=5,d=500;case 4:if(!s){r.next=10;break}return r.next=7,s(e,o);case 7:l=r.sent,r.next=13;break;case 10:return r.next=12,u(e,o);case 12:l=r.sent;case 13:if(429===l.status){r.next=15;break}return r.abrupt("break",26);case 15:if(!0!==i){r.next=17;break}return r.abrupt("break",26);case 17:if(0!=(c-=1)){r.next=20;break}return r.abrupt("break",26);case 20:return console.log("Server responded with ".concat(l.status," ").concat(l.statusText,".  Retrying after ").concat(d,"ms delay...")),r.next=23,Le(d);case 23:d*=2;case 24:r.next=4;break;case 26:return r.next=28,l.text();case 28:f=r.sent,l.ok?a(null,f):a(new Error("".concat(l.status," ").concat(l.statusText,": ").concat(f))),r.next=35;break;case 32:r.prev=32,r.t0=r.catch(1),r.t0 instanceof Error&&a(r.t0);case 35:case"end":return r.stop()}}),r,null,[[1,32]])})));return function(e,t){return r.apply(this,arguments)}}(),{});return c}(t,s,u,c,l,d),this._rpcRequest=(f=this._rpcClient,function(e,t){return new Promise((function(r,n){f.request(e,t,(function(e,t){e?n(e):r(t)}))}))}),this._rpcBatchRequest=function(e){return function(t){return new Promise((function(r,n){0===t.length&&r([]);var i=t.map((function(t){return e.request(t.methodName,t.args)}));e.request(i,(function(e,t){e?n(e):r(t)}))}))}}(this._rpcClient),this._rpcWebSocket=new st(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}var t,r,s,u,c,l,d,f,p,y,b,m,k,w,x,B,E,P,Z,T,O,C,W,L,U,K,z,j,N,M,G,D,J,F,X,H,Y,ee,te,re,ne,ie,ae,se,oe,ce,le,de,fe,pe,ye,ge,be,me,ke,we,xe,Ie,Ae,_e,Be,Re,Ee,Pe,Ze,Te,Oe,Ce,We,Ue,Ke,ze,qe,je,Me,Ge,De,Je,Fe,Xe,He,Ve,Qe,et,it,at,ot,ct,dt;return(0,i.Z)(e,[{key:"commitment",get:function(){return this._commitment}},{key:"rpcEndpoint",get:function(){return this._rpcEndpoint}},{key:"getBalanceAndContext",value:(dt=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vt(r),i=n.commitment,a=n.config,s=this._buildArgs([t.toBase58()],i,void 0,a),e.next=4,this._rpcRequest("getBalance",s);case 4:if(o=e.sent,!("error"in(u=(0,_.Ue)(o,It((0,_.Rx)()))))){e.next=8;break}throw new rt(u.error,"failed to get balance for ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return dt.apply(this,arguments)})},{key:"getBalance",value:(ct=(0,o.Z)(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBalanceAndContext(t,r).then((function(e){return e.value})).catch((function(e){throw new Error("failed to get balance of account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return ct.apply(this,arguments)})},{key:"getBlockTime",value:(ot=(0,o.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getBlockTime",[t]);case 2:if(r=e.sent,!("error"in(n=(0,_.Ue)(r,St((0,_.AG)((0,_.Rx)())))))){e.next=6;break}throw new rt(n.error,"failed to get block time for slot ".concat(t));case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return ot.apply(this,arguments)})},{key:"getMinimumLedgerSlot",value:(at=(0,o.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("minimumLedgerSlot",[]);case 2:if(t=e.sent,!("error"in(r=(0,_.Ue)(t,St((0,_.Rx)()))))){e.next=6;break}throw new rt(r.error,"failed to get minimum ledger slot");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)}))),function(){return at.apply(this,arguments)})},{key:"getFirstAvailableBlock",value:(it=(0,o.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getFirstAvailableBlock",[]);case 2:if(t=e.sent,!("error"in(r=(0,_.Ue)(t,Jt)))){e.next=6;break}throw new rt(r.error,"failed to get first available block");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)}))),function(){return it.apply(this,arguments)})},{key:"getSupply",value:(et=(0,o.Z)(h().mark((function e(t){var r,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},r="string"==typeof t?{commitment:t}:t?gt(gt({},t),{},{commitment:t&&t.commitment||this.commitment}):{commitment:this.commitment},e.next=4,this._rpcRequest("getSupply",[r]);case 4:if(n=e.sent,!("error"in(i=(0,_.Ue)(n,Ft)))){e.next=8;break}throw new rt(i.error,"failed to get supply");case 8:return e.abrupt("return",i.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return et.apply(this,arguments)})},{key:"getTokenSupply",value:(Qe=(0,o.Z)(h().mark((function e(t,r){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenSupply",n);case 3:if(i=e.sent,!("error"in(a=(0,_.Ue)(i,It(Xt))))){e.next=7;break}throw new rt(a.error,"failed to get token supply");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return Qe.apply(this,arguments)})},{key:"getTokenAccountBalance",value:(Ve=(0,o.Z)(h().mark((function e(t,r){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenAccountBalance",n);case 3:if(i=e.sent,!("error"in(a=(0,_.Ue)(i,It(Xt))))){e.next=7;break}throw new rt(a.error,"failed to get token account balance");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return Ve.apply(this,arguments)})},{key:"getTokenAccountsByOwner",value:(He=(0,o.Z)(h().mark((function e(t,r,n){var i,a,s,o,u,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vt(n),a=i.commitment,s=i.config,o=[t.toBase58()],"mint"in r?o.push({mint:r.mint.toBase58()}):o.push({programId:r.programId.toBase58()}),u=this._buildArgs(o,a,"base64",s),e.next=6,this._rpcRequest("getTokenAccountsByOwner",u);case 6:if(c=e.sent,!("error"in(l=(0,_.Ue)(c,Vt)))){e.next=10;break}throw new rt(l.error,"failed to get token accounts owned by account ".concat(t.toBase58()));case 10:return e.abrupt("return",l.result);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return He.apply(this,arguments)})},{key:"getParsedTokenAccountsByOwner",value:(Xe=(0,o.Z)(h().mark((function e(t,r,n){var i,a,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[t.toBase58()],"mint"in r?i.push({mint:r.mint.toBase58()}):i.push({programId:r.programId.toBase58()}),a=this._buildArgs(i,n,"jsonParsed"),e.next=5,this._rpcRequest("getTokenAccountsByOwner",a);case 5:if(s=e.sent,!("error"in(o=(0,_.Ue)(s,Qt)))){e.next=9;break}throw new rt(o.error,"failed to get token accounts owned by account ".concat(t.toBase58()));case 9:return e.abrupt("return",o.result);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return Xe.apply(this,arguments)})},{key:"getLargestAccounts",value:(Fe=(0,o.Z)(h().mark((function e(t){var r,n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gt(gt({},t),{},{commitment:t&&t.commitment||this.commitment}),n=r.filter||r.commitment?[r]:[],e.next=4,this._rpcRequest("getLargestAccounts",n);case 4:if(i=e.sent,!("error"in(a=(0,_.Ue)(i,Yt)))){e.next=8;break}throw new rt(a.error,"failed to get largest accounts");case 8:return e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return Fe.apply(this,arguments)})},{key:"getTokenLargestAccounts",value:(Je=(0,o.Z)(h().mark((function e(t,r){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenLargestAccounts",n);case 3:if(i=e.sent,!("error"in(a=(0,_.Ue)(i,Ht)))){e.next=7;break}throw new rt(a.error,"failed to get token largest accounts");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return Je.apply(this,arguments)})},{key:"getAccountInfoAndContext",value:(De=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vt(r),i=n.commitment,a=n.config,s=this._buildArgs([t.toBase58()],i,"base64",a),e.next=4,this._rpcRequest("getAccountInfo",s);case 4:if(o=e.sent,!("error"in(u=(0,_.Ue)(o,It((0,_.AG)(er)))))){e.next=8;break}throw new rt(u.error,"failed to get info about account ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return De.apply(this,arguments)})},{key:"getParsedAccountInfo",value:(Ge=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vt(r),i=n.commitment,a=n.config,s=this._buildArgs([t.toBase58()],i,"jsonParsed",a),e.next=4,this._rpcRequest("getAccountInfo",s);case 4:if(o=e.sent,!("error"in(u=(0,_.Ue)(o,It((0,_.AG)(nr)))))){e.next=8;break}throw new rt(u.error,"failed to get info about account ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return Ge.apply(this,arguments)})},{key:"getAccountInfo",value:(Me=(0,o.Z)(h().mark((function e(t,r){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getAccountInfoAndContext(t,r);case 3:return n=e.sent,e.abrupt("return",n.value);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed to get info about account "+t.toBase58()+": "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e,t){return Me.apply(this,arguments)})},{key:"getMultipleParsedAccounts",value:(je=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vt(r),i=n.commitment,a=n.config,s=t.map((function(e){return e.toBase58()})),o=this._buildArgs([s],i,"jsonParsed",a),e.next=5,this._rpcRequest("getMultipleAccounts",o);case 5:if(u=e.sent,!("error"in(c=(0,_.Ue)(u,It((0,_.IX)((0,_.AG)(nr))))))){e.next=9;break}throw new rt(c.error,"failed to get info for accounts ".concat(s));case 9:return e.abrupt("return",c.result);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return je.apply(this,arguments)})},{key:"getMultipleAccountsInfoAndContext",value:(qe=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vt(r),i=n.commitment,a=n.config,s=t.map((function(e){return e.toBase58()})),o=this._buildArgs([s],i,"base64",a),e.next=5,this._rpcRequest("getMultipleAccounts",o);case 5:if(u=e.sent,!("error"in(c=(0,_.Ue)(u,It((0,_.IX)((0,_.AG)(er))))))){e.next=9;break}throw new rt(c.error,"failed to get info for accounts ".concat(s));case 9:return e.abrupt("return",c.result);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return qe.apply(this,arguments)})},{key:"getMultipleAccountsInfo",value:(ze=(0,o.Z)(h().mark((function e(t,r){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMultipleAccountsInfoAndContext(t,r);case 2:return n=e.sent,e.abrupt("return",n.value);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return ze.apply(this,arguments)})},{key:"getStakeActivation",value:(Ke=(0,o.Z)(h().mark((function e(t,r,n){var i,a,s,o,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vt(r),a=i.commitment,s=i.config,o=this._buildArgs([t.toBase58()],a,void 0,gt(gt({},s),{},{epoch:null!=n?n:null==s?void 0:s.epoch})),e.next=4,this._rpcRequest("getStakeActivation",o);case 4:if(u=e.sent,!("error"in(c=(0,_.Ue)(u,St(ar))))){e.next=8;break}throw new rt(c.error,"failed to get Stake Activation ".concat(t.toBase58()));case 8:return e.abrupt("return",c.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return Ke.apply(this,arguments)})},{key:"getProgramAccounts",value:(Ue=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u,c,l,d,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vt(r),i=n.commitment,a=n.config,o=(s=a||{}).encoding,u=(0,A.Z)(s,ht),c=this._buildArgs([t.toBase58()],i,o||"base64",u),e.next=5,this._rpcRequest("getProgramAccounts",c);case 5:if(l=e.sent,d=(0,_.IX)(tr),!("error"in(f=!0===u.withContext?(0,_.Ue)(l,It(d)):(0,_.Ue)(l,St(d))))){e.next=10;break}throw new rt(f.error,"failed to get accounts owned by program ".concat(t.toBase58()));case 10:return e.abrupt("return",f.result);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return Ue.apply(this,arguments)})},{key:"getParsedProgramAccounts",value:(We=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vt(r),i=n.commitment,a=n.config,s=this._buildArgs([t.toBase58()],i,"jsonParsed",a),e.next=4,this._rpcRequest("getProgramAccounts",s);case 4:if(o=e.sent,!("error"in(u=(0,_.Ue)(o,St((0,_.IX)(ir)))))){e.next=8;break}throw new rt(u.error,"failed to get accounts owned by program ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return We.apply(this,arguments)})},{key:"confirmTransaction",value:(Ce=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=4;break}n=t,e.next=8;break;case 4:if(null===(i=(a=t).abortSignal)||void 0===i||!i.aborted){e.next=7;break}return e.abrupt("return",Promise.reject(a.abortSignal.reason));case 7:n=a.signature;case 8:e.prev=8,s=g().decode(n),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(8),new Error("signature must be base58 encoded: "+n);case 15:if(ue(64===s.length,"signature has invalid length"),"string"!=typeof t){e.next=22;break}return e.next=19,this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:n});case 19:return e.abrupt("return",e.sent);case 22:if(!("lastValidBlockHeight"in t)){e.next=28;break}return e.next=25,this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:t});case 25:return e.abrupt("return",e.sent);case 28:return e.next=30,this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:t});case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}}),e,this,[[8,12]])}))),function(e,t){return Ce.apply(this,arguments)})},{key:"getCancellationPromise",value:function(e){return new Promise((function(t,r){null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",(function(){r(e.reason)})))}))}},{key:"getTransactionConfirmationPromise",value:function(e){var t,r,n=this,i=e.commitment,a=e.signature,s=!1;return{abortConfirmation:function(){r&&(r(),r=void 0),null!=t&&(n.removeSignatureListener(t),t=void 0)},confirmationPromise:new Promise((function(e,u){try{t=n.onSignature(a,(function(r,n){t=void 0;var i={context:n,value:r};e({__type:ve.PROCESSED,response:i})}),i);var c=new Promise((function(e){null==t?e():r=n._onSubscriptionStateChange(t,(function(t){"subscribed"===t&&e()}))}));(0,o.Z)(h().mark((function t(){var r,o,l;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c;case 2:if(!s){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,n.getSignatureStatus(a);case 6:if(r=t.sent,!s){t.next=9;break}return t.abrupt("return");case 9:if(null!=r){t.next=11;break}return t.abrupt("return");case 11:if(o=r.context,null!=(l=r.value)){t.next=14;break}return t.abrupt("return");case 14:if(null==l||!l.err){t.next=18;break}u(l.err),t.next=29;break;case 18:t.t0=i,t.next="confirmed"===t.t0||"single"===t.t0||"singleGossip"===t.t0?21:"finalized"===t.t0||"max"===t.t0||"root"===t.t0?24:("processed"===t.t0||t.t0,27);break;case 21:if("processed"!==l.confirmationStatus){t.next=23;break}return t.abrupt("return");case 23:return t.abrupt("break",27);case 24:if("processed"!==l.confirmationStatus&&"confirmed"!==l.confirmationStatus){t.next=26;break}return t.abrupt("return");case 26:return t.abrupt("break",27);case 27:s=!0,e({__type:ve.PROCESSED,response:{context:o,value:l}});case 29:case"end":return t.stop()}}),t)})))()}catch(e){u(e)}}))}}},{key:"confirmTransactionUsingBlockHeightExceedanceStrategy",value:(Oe=(0,o.Z)(h().mark((function e(t){var r,n,i,a,s,u,c,l,d,f,p,y,g,b=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commitment,n=t.strategy,i=n.abortSignal,a=n.lastValidBlockHeight,s=n.signature,u=!1,c=new Promise((function(e){var t=function(){var e=(0,o.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.getBlockHeight(r);case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",-1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,o.Z)(h().mark((function r(){var n;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t();case 2:if(n=r.sent,!u){r.next=5;break}return r.abrupt("return");case 5:if(!(n<=a)){r.next=17;break}return r.next=8,Le(1e3);case 8:if(!u){r.next=10;break}return r.abrupt("return");case 10:return r.next=12,t();case 12:if(n=r.sent,!u){r.next=15;break}return r.abrupt("return");case 15:r.next=5;break;case 17:e({__type:ve.BLOCKHEIGHT_EXCEEDED});case 18:case"end":return r.stop()}}),r)})))()})),l=this.getTransactionConfirmationPromise({commitment:r,signature:s}),d=l.abortConfirmation,f=l.confirmationPromise,p=this.getCancellationPromise(i),e.prev=5,e.next=8,Promise.race([p,f,c]);case 8:if((g=e.sent).__type!==ve.PROCESSED){e.next=13;break}y=g.response,e.next=14;break;case 13:throw new V(s);case 14:return e.prev=14,u=!0,d(),e.finish(14);case 18:return e.abrupt("return",y);case 19:case"end":return e.stop()}}),e,this,[[5,,14,18]])}))),function(e){return Oe.apply(this,arguments)})},{key:"confirmTransactionUsingDurableNonceStrategy",value:(Te=(0,o.Z)(h().mark((function e(t){var r,n,i,a,s,u,c,l,d,f,p,y,g,b,m,k,v,w,x,S,I,A=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commitment,n=t.strategy,i=n.abortSignal,a=n.minContextSlot,s=n.nonceAccountPubkey,u=n.nonceValue,c=n.signature,l=!1,d=new Promise((function(e){var t=u,n=null,i=function(){var e=(0,o.Z)(h().mark((function e(){var i,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.getNonceAndContext(s,{commitment:r,minContextSlot:a});case 3:return i=e.sent,o=i.context,u=i.value,n=o.slot,e.abrupt("return",null==u?void 0:u.nonce);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();(0,o.Z)(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i();case 2:if(t=r.sent,!l){r.next=5;break}return r.abrupt("return");case 5:if(u===t){r.next=9;break}return e({__type:ve.NONCE_INVALID,slotInWhichNonceDidAdvance:n}),r.abrupt("return");case 9:return r.next=11,Le(2e3);case 11:if(!l){r.next=13;break}return r.abrupt("return");case 13:return r.next=15,i();case 15:if(t=r.sent,!l){r.next=18;break}return r.abrupt("return");case 18:r.next=5;break;case 20:case"end":return r.stop()}}),r)})))()})),f=this.getTransactionConfirmationPromise({commitment:r,signature:c}),p=f.abortConfirmation,y=f.confirmationPromise,g=this.getCancellationPromise(i),e.prev=5,e.next=8,Promise.race([g,y,d]);case 8:if((m=e.sent).__type!==ve.PROCESSED){e.next=13;break}b=m.response,e.next=47;break;case 13:return e.next=16,this.getSignatureStatus(c);case 16:if(null!=(x=e.sent)){e.next=19;break}return e.abrupt("break",27);case 19:if(!(x.context.slot<(null!==(w=m.slotInWhichNonceDidAdvance)&&void 0!==w?w:a))){e.next=23;break}return e.next=22,Le(400);case 22:return e.abrupt("continue",13);case 23:return v=x,e.abrupt("break",27);case 27:if(null===(k=v)||void 0===k||!k.value){e.next=46;break}S=r||"finalized",I=v.value.confirmationStatus,e.t0=S,e.next="processed"===e.t0||"recent"===e.t0?33:"confirmed"===e.t0||"single"===e.t0||"singleGossip"===e.t0?36:"finalized"===e.t0||"max"===e.t0||"root"===e.t0?39:42;break;case 33:if("processed"===I||"confirmed"===I||"finalized"===I){e.next=35;break}throw new Q(c);case 35:case 38:case 41:return e.abrupt("break",43);case 36:if("confirmed"===I||"finalized"===I){e.next=38;break}throw new Q(c);case 39:if("finalized"===I){e.next=41;break}throw new Q(c);case 42:case 43:b={context:v.context,value:{err:v.value.err}},e.next=47;break;case 46:throw new Q(c);case 47:return e.prev=47,l=!0,p(),e.finish(47);case 51:return e.abrupt("return",b);case 52:case"end":return e.stop()}}),e,this,[[5,,47,51]])}))),function(e){return Te.apply(this,arguments)})},{key:"confirmTransactionUsingLegacyTimeoutStrategy",value:(Ze=(0,o.Z)(h().mark((function e(t){var r,n,i,a,s,o,u,c,l,d=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commitment,n=t.signature,a=new Promise((function(e){var t=d._confirmTransactionInitialTimeout||6e4;switch(r){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":t=d._confirmTransactionInitialTimeout||3e4}i=setTimeout((function(){return e({__type:ve.TIMED_OUT,timeoutMs:t})}),t)})),s=this.getTransactionConfirmationPromise({commitment:r,signature:n}),o=s.abortConfirmation,u=s.confirmationPromise,e.prev=3,e.next=6,Promise.race([u,a]);case 6:if((l=e.sent).__type!==ve.PROCESSED){e.next=11;break}c=l.response,e.next=12;break;case 11:throw new $(n,l.timeoutMs/1e3);case 12:return e.prev=12,clearTimeout(i),o(),e.finish(12);case 16:return e.abrupt("return",c);case 17:case"end":return e.stop()}}),e,this,[[3,,12,16]])}))),function(e){return Ze.apply(this,arguments)})},{key:"getClusterNodes",value:(Pe=(0,o.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getClusterNodes",[]);case 2:if(t=e.sent,!("error"in(r=(0,_.Ue)(t,St((0,_.IX)(br)))))){e.next=6;break}throw new rt(r.error,"failed to get cluster nodes");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)}))),function(){return Pe.apply(this,arguments)})},{key:"getVoteAccounts",value:(Ee=(0,o.Z)(h().mark((function e(t){var r,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getVoteAccounts",r);case 3:if(n=e.sent,!("error"in(i=(0,_.Ue)(n,kr)))){e.next=7;break}throw new rt(i.error,"failed to get vote accounts");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return Ee.apply(this,arguments)})},{key:"getSlot",value:(Re=(0,o.Z)(h().mark((function e(t){var r,n,i,a,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vt(t),n=r.commitment,i=r.config,a=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getSlot",a);case 4:if(s=e.sent,!("error"in(o=(0,_.Ue)(s,St((0,_.Rx)()))))){e.next=8;break}throw new rt(o.error,"failed to get slot");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return Re.apply(this,arguments)})},{key:"getSlotLeader",value:(Be=(0,o.Z)(h().mark((function e(t){var r,n,i,a,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vt(t),n=r.commitment,i=r.config,a=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getSlotLeader",a);case 4:if(s=e.sent,!("error"in(o=(0,_.Ue)(s,St((0,_.Z_)()))))){e.next=8;break}throw new rt(o.error,"failed to get slot leader");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return Be.apply(this,arguments)})},{key:"getSlotLeaders",value:(_e=(0,o.Z)(h().mark((function e(t,r){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t,r],e.next=3,this._rpcRequest("getSlotLeaders",n);case 3:if(i=e.sent,!("error"in(a=(0,_.Ue)(i,St((0,_.IX)(bt)))))){e.next=7;break}throw new rt(a.error,"failed to get slot leaders");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return _e.apply(this,arguments)})},{key:"getSignatureStatus",value:(Ae=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSignatureStatuses([t],r);case 2:return n=e.sent,i=n.context,ue(1===(a=n.value).length),s=a[0],e.abrupt("return",{context:i,value:s});case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return Ae.apply(this,arguments)})},{key:"getSignatureStatuses",value:(Ie=(0,o.Z)(h().mark((function e(t,r){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t],r&&n.push(r),e.next=4,this._rpcRequest("getSignatureStatuses",n);case 4:if(i=e.sent,!("error"in(a=(0,_.Ue)(i,xr)))){e.next=8;break}throw new rt(a.error,"failed to get signature status");case 8:return e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return Ie.apply(this,arguments)})},{key:"getTransactionCount",value:(xe=(0,o.Z)(h().mark((function e(t){var r,n,i,a,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vt(t),n=r.commitment,i=r.config,a=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getTransactionCount",a);case 4:if(s=e.sent,!("error"in(o=(0,_.Ue)(s,St((0,_.Rx)()))))){e.next=8;break}throw new rt(o.error,"failed to get transaction count");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return xe.apply(this,arguments)})},{key:"getTotalSupply",value:(we=(0,o.Z)(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0});case 2:return r=e.sent,e.abrupt("return",r.value.total);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return we.apply(this,arguments)})},{key:"getInflationGovernor",value:(ke=(0,o.Z)(h().mark((function e(t){var r,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getInflationGovernor",r);case 3:if(n=e.sent,!("error"in(i=(0,_.Ue)(n,qt)))){e.next=7;break}throw new rt(i.error,"failed to get inflation");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return ke.apply(this,arguments)})},{key:"getInflationReward",value:(me=(0,o.Z)(h().mark((function e(t,r,n){var i,a,s,o,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vt(n),a=i.commitment,s=i.config,o=this._buildArgs([t.map((function(e){return e.toBase58()}))],a,void 0,gt(gt({},s),{},{epoch:null!=r?r:null==s?void 0:s.epoch})),e.next=4,this._rpcRequest("getInflationReward",o);case 4:if(u=e.sent,!("error"in(c=(0,_.Ue)(u,Rt)))){e.next=8;break}throw new rt(c.error,"failed to get inflation reward");case 8:return e.abrupt("return",c.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return me.apply(this,arguments)})},{key:"getInflationRate",value:(be=(0,o.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getInflationRate",[]);case 2:if(t=e.sent,!("error"in(r=(0,_.Ue)(t,jt)))){e.next=6;break}throw new rt(r.error,"failed to get inflation rate");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)}))),function(){return be.apply(this,arguments)})},{key:"getEpochInfo",value:(ge=(0,o.Z)(h().mark((function e(t){var r,n,i,a,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vt(t),n=r.commitment,i=r.config,a=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getEpochInfo",a);case 4:if(s=e.sent,!("error"in(o=(0,_.Ue)(s,Mt)))){e.next=8;break}throw new rt(o.error,"failed to get epoch info");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return ge.apply(this,arguments)})},{key:"getEpochSchedule",value:(ye=(0,o.Z)(h().mark((function e(){var t,r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getEpochSchedule",[]);case 2:if(t=e.sent,!("error"in(r=(0,_.Ue)(t,Gt)))){e.next=6;break}throw new rt(r.error,"failed to get epoch schedule");case 6:return n=r.result,e.abrupt("return",new Ye(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot));case 8:case"end":return e.stop()}}),e,this)}))),function(){return ye.apply(this,arguments)})},{key:"getLeaderSchedule",value:(pe=(0,o.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getLeaderSchedule",[]);case 2:if(t=e.sent,!("error"in(r=(0,_.Ue)(t,Dt)))){e.next=6;break}throw new rt(r.error,"failed to get leader schedule");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)}))),function(){return pe.apply(this,arguments)})},{key:"getMinimumBalanceForRentExemption",value:(fe=(0,o.Z)(h().mark((function e(t,r){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t],r),e.next=3,this._rpcRequest("getMinimumBalanceForRentExemption",n);case 3:if(i=e.sent,!("error"in(a=(0,_.Ue)(i,Sr)))){e.next=8;break}return console.warn("Unable to fetch minimum balance for rent exemption"),e.abrupt("return",0);case 8:return e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return fe.apply(this,arguments)})},{key:"getRecentBlockhashAndContext",value:(de=(0,o.Z)(h().mark((function e(t){var r,n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getRecentBlockhash",r);case 3:if(n=e.sent,!("error"in(i=(0,_.Ue)(n,Vr)))){e.next=7;break}throw new rt(i.error,"failed to get recent blockhash");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return de.apply(this,arguments)})},{key:"getRecentPerformanceSamples",value:(le=(0,o.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]);case 2:if(r=e.sent,!("error"in(n=(0,_.Ue)(r,en)))){e.next=6;break}throw new rt(n.error,"failed to get recent performance samples");case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return le.apply(this,arguments)})},{key:"getFeeCalculatorForBlockhash",value:(ce=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t],r),e.next=3,this._rpcRequest("getFeeCalculatorForBlockhash",n);case 3:if(i=e.sent,!("error"in(a=(0,_.Ue)(i,tn)))){e.next=7;break}throw new rt(a.error,"failed to get fee calculator");case 7:return s=a.result,o=s.context,u=s.value,e.abrupt("return",{context:o,value:null!==u?u.feeCalculator:null});case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return ce.apply(this,arguments)})},{key:"getFeeForMessage",value:(oe=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=q(t.serialize()).toString("base64"),i=this._buildArgs([n],r),e.next=4,this._rpcRequest("getFeeForMessage",i);case 4:if(a=e.sent,!("error"in(s=(0,_.Ue)(a,It((0,_.AG)((0,_.Rx)())))))){e.next=8;break}throw new rt(s.error,"failed to get fee for message");case 8:if(null!==s.result){e.next=10;break}throw new Error("invalid blockhash");case 10:return e.abrupt("return",s.result);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return oe.apply(this,arguments)})},{key:"getRecentPrioritizationFees",value:(se=(0,o.Z)(h().mark((function e(t){var r,n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null==t||null===(r=t.lockedWritableAccounts)||void 0===r?void 0:r.map((function(e){return e.toBase58()})),i=null!=n&&n.length?[n]:[],e.next=4,this._rpcRequest("getRecentPrioritizationFees",i);case 4:if(a=e.sent,!("error"in(s=(0,_.Ue)(a,Nt)))){e.next=8;break}throw new rt(s.error,"failed to get recent prioritization fees");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return se.apply(this,arguments)})},{key:"getRecentBlockhash",value:(ae=(0,o.Z)(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getRecentBlockhashAndContext(t);case 3:return r=e.sent,e.abrupt("return",r.value);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed to get recent blockhash: "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return ae.apply(this,arguments)})},{key:"getLatestBlockhash",value:(ie=(0,o.Z)(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getLatestBlockhashAndContext(t);case 3:return r=e.sent,e.abrupt("return",r.value);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed to get recent blockhash: "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return ie.apply(this,arguments)})},{key:"getLatestBlockhashAndContext",value:(ne=(0,o.Z)(h().mark((function e(t){var r,n,i,a,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vt(t),n=r.commitment,i=r.config,a=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getLatestBlockhash",a);case 4:if(s=e.sent,!("error"in(o=(0,_.Ue)(s,$r)))){e.next=8;break}throw new rt(o.error,"failed to get latest blockhash");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return ne.apply(this,arguments)})},{key:"isBlockhashValid",value:(re=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vt(r),i=n.commitment,a=n.config,s=this._buildArgs([t],i,void 0,a),e.next=4,this._rpcRequest("isBlockhashValid",s);case 4:if(o=e.sent,!("error"in(u=(0,_.Ue)(o,Qr)))){e.next=8;break}throw new rt(u.error,"failed to determine if the blockhash `"+t+"`is valid");case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return re.apply(this,arguments)})},{key:"getVersion",value:(te=(0,o.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getVersion",[]);case 2:if(t=e.sent,!("error"in(r=(0,_.Ue)(t,St(Ut))))){e.next=6;break}throw new rt(r.error,"failed to get version");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)}))),function(){return te.apply(this,arguments)})},{key:"getGenesisHash",value:(ee=(0,o.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getGenesisHash",[]);case 2:if(t=e.sent,!("error"in(r=(0,_.Ue)(t,St((0,_.Z_)()))))){e.next=6;break}throw new rt(r.error,"failed to get genesis hash");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)}))),function(){return ee.apply(this,arguments)})},{key:"getBlock",value:(Y=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u,c,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vt(r),i=n.commitment,a=n.config,s=this._buildArgsAtLeastConfirmed([t],i,void 0,a),e.next=4,this._rpcRequest("getBlock",s);case 4:o=e.sent,e.prev=5,e.t0=null==a?void 0:a.transactionDetails,e.next="accounts"===e.t0?9:"none"===e.t0?13:17;break;case 9:if(!("error"in(u=(0,_.Ue)(o,Nr)))){e.next=12;break}throw u.error;case 12:return e.abrupt("return",u.result);case 13:if(!("error"in(c=(0,_.Ue)(o,jr)))){e.next=16;break}throw c.error;case 16:return e.abrupt("return",c.result);case 17:if(!("error"in(l=(0,_.Ue)(o,qr)))){e.next=20;break}throw l.error;case 20:return d=l.result,e.abrupt("return",d?gt(gt({},d),{},{transactions:d.transactions.map((function(e){var t=e.transaction,r=e.meta,n=e.version;return{meta:r,transaction:gt(gt({},t),{},{message:_t(n,t.message)}),version:n}}))}):null);case 22:e.next=27;break;case 24:throw e.prev=24,e.t1=e.catch(5),new rt(e.t1,"failed to get confirmed block");case 27:case"end":return e.stop()}}),e,this,[[5,24]])}))),function(e,t){return Y.apply(this,arguments)})},{key:"getParsedBlock",value:(H=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vt(r),i=n.commitment,a=n.config,s=this._buildArgsAtLeastConfirmed([t],i,"jsonParsed",a),e.next=4,this._rpcRequest("getBlock",s);case 4:o=e.sent,e.prev=5,e.t0=null==a?void 0:a.transactionDetails,e.next="accounts"===e.t0?9:"none"===e.t0?13:17;break;case 9:if(!("error"in(u=(0,_.Ue)(o,Gr)))){e.next=12;break}throw u.error;case 12:return e.abrupt("return",u.result);case 13:if(!("error"in(c=(0,_.Ue)(o,Dr)))){e.next=16;break}throw c.error;case 16:return e.abrupt("return",c.result);case 17:if(!("error"in(l=(0,_.Ue)(o,Mr)))){e.next=20;break}throw l.error;case 20:return e.abrupt("return",l.result);case 21:e.next=26;break;case 23:throw e.prev=23,e.t1=e.catch(5),new rt(e.t1,"failed to get block");case 26:case"end":return e.stop()}}),e,this,[[5,23]])}))),function(e,t){return H.apply(this,arguments)})},{key:"getBlockProduction",value:(X=(0,o.Z)(h().mark((function e(t){var r,n,i,a,s,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"string"==typeof t?n=t:t&&(i=t.commitment,a=(0,A.Z)(t,ft),n=i,r=a),s=this._buildArgs([],n,"base64",r),e.next=4,this._rpcRequest("getBlockProduction",s);case 4:if(o=e.sent,!("error"in(u=(0,_.Ue)(o,zt)))){e.next=8;break}throw new rt(u.error,"failed to get block production information");case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return X.apply(this,arguments)})},{key:"getTransaction",value:(F=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vt(r),i=n.commitment,a=n.config,s=this._buildArgsAtLeastConfirmed([t],i,void 0,a),e.next=4,this._rpcRequest("getTransaction",s);case 4:if(o=e.sent,!("error"in(u=(0,_.Ue)(o,Xr)))){e.next=8;break}throw new rt(u.error,"failed to get transaction");case 8:if(c=u.result){e.next=11;break}return e.abrupt("return",c);case 11:return e.abrupt("return",gt(gt({},c),{},{transaction:gt(gt({},c.transaction),{},{message:_t(c.version,c.transaction.message)})}));case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return F.apply(this,arguments)})},{key:"getParsedTransaction",value:(J=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vt(r),i=n.commitment,a=n.config,s=this._buildArgsAtLeastConfirmed([t],i,"jsonParsed",a),e.next=4,this._rpcRequest("getTransaction",s);case 4:if(o=e.sent,!("error"in(u=(0,_.Ue)(o,Hr)))){e.next=8;break}throw new rt(u.error,"failed to get transaction");case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return J.apply(this,arguments)})},{key:"getParsedTransactions",value:(D=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u,c=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vt(r),i=n.commitment,a=n.config,s=t.map((function(e){return{methodName:"getTransaction",args:c._buildArgsAtLeastConfirmed([e],i,"jsonParsed",a)}})),e.next=4,this._rpcBatchRequest(s);case 4:return o=e.sent,u=o.map((function(e){var t=(0,_.Ue)(e,Hr);if("error"in t)throw new rt(t.error,"failed to get transactions");return t.result})),e.abrupt("return",u);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return D.apply(this,arguments)})},{key:"getTransactions",value:(G=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u,c=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vt(r),i=n.commitment,a=n.config,s=t.map((function(e){return{methodName:"getTransaction",args:c._buildArgsAtLeastConfirmed([e],i,void 0,a)}})),e.next=4,this._rpcBatchRequest(s);case 4:return o=e.sent,u=o.map((function(e){var t=(0,_.Ue)(e,Xr);if("error"in t)throw new rt(t.error,"failed to get transactions");var r=t.result;return r?gt(gt({},r),{},{transaction:gt(gt({},r.transaction),{},{message:_t(r.version,r.transaction.message)})}):r})),e.abrupt("return",u);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return G.apply(this,arguments)})},{key:"getConfirmedBlock",value:(M=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r),e.next=3,this._rpcRequest("getConfirmedBlock",n);case 3:if(i=e.sent,!("error"in(a=(0,_.Ue)(i,Jr)))){e.next=7;break}throw new rt(a.error,"failed to get confirmed block");case 7:if(s=a.result){e.next=10;break}throw new Error("Confirmed block "+t+" not found");case 10:return o=gt(gt({},s),{},{transactions:s.transactions.map((function(e){var t=e.transaction,r=e.meta,n=new he(t.message);return{meta:r,transaction:gt(gt({},t),{},{message:n})}}))}),e.abrupt("return",gt(gt({},o),{},{transactions:o.transactions.map((function(e){var t=e.transaction;return{meta:e.meta,transaction:Se.populate(t.message,t.signatures)}}))}));case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return M.apply(this,arguments)})},{key:"getBlocks",value:(N=(0,o.Z)(h().mark((function e(t,r,n){var i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed(void 0!==r?[t,r]:[t],n),e.next=3,this._rpcRequest("getBlocks",i);case 3:if(a=e.sent,!("error"in(s=(0,_.Ue)(a,St((0,_.IX)((0,_.Rx)())))))){e.next=7;break}throw new rt(s.error,"failed to get blocks");case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return N.apply(this,arguments)})},{key:"getBlockSignatures",value:(j=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),e.next=3,this._rpcRequest("getBlock",n);case 3:if(i=e.sent,!("error"in(a=(0,_.Ue)(i,Fr)))){e.next=7;break}throw new rt(a.error,"failed to get block");case 7:if(s=a.result){e.next=10;break}throw new Error("Block "+t+" not found");case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return j.apply(this,arguments)})},{key:"getConfirmedBlockSignatures",value:(z=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),e.next=3,this._rpcRequest("getConfirmedBlock",n);case 3:if(i=e.sent,!("error"in(a=(0,_.Ue)(i,Fr)))){e.next=7;break}throw new rt(a.error,"failed to get confirmed block");case 7:if(s=a.result){e.next=10;break}throw new Error("Confirmed block "+t+" not found");case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return z.apply(this,arguments)})},{key:"getConfirmedTransaction",value:(K=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r),e.next=3,this._rpcRequest("getConfirmedTransaction",n);case 3:if(i=e.sent,!("error"in(a=(0,_.Ue)(i,Xr)))){e.next=7;break}throw new rt(a.error,"failed to get transaction");case 7:if(s=a.result){e.next=10;break}return e.abrupt("return",s);case 10:return o=new he(s.transaction.message),u=s.transaction.signatures,e.abrupt("return",gt(gt({},s),{},{transaction:Se.populate(o,u)}));case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return K.apply(this,arguments)})},{key:"getParsedConfirmedTransaction",value:(U=(0,o.Z)(h().mark((function e(t,r){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed"),e.next=3,this._rpcRequest("getConfirmedTransaction",n);case 3:if(i=e.sent,!("error"in(a=(0,_.Ue)(i,Hr)))){e.next=7;break}throw new rt(a.error,"failed to get confirmed transaction");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return U.apply(this,arguments)})},{key:"getParsedConfirmedTransactions",value:(L=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return{methodName:"getConfirmedTransaction",args:s._buildArgsAtLeastConfirmed([e],r,"jsonParsed")}})),e.next=3,this._rpcBatchRequest(n);case 3:return i=e.sent,a=i.map((function(e){var t=(0,_.Ue)(e,Hr);if("error"in t)throw new rt(t.error,"failed to get confirmed transactions");return t.result})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return L.apply(this,arguments)})},{key:"getConfirmedSignaturesForAddress",value:(W=(0,o.Z)(h().mark((function e(t,r,n){var i,a,s,o,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},e.next=3,this.getFirstAvailableBlock();case 3:a=e.sent;case 4:if("until"in i){e.next=24;break}if(!(--r<=0||r<a)){e.next=8;break}return e.abrupt("break",24);case 8:return e.prev=8,e.next=11,this.getConfirmedBlockSignatures(r,"finalized");case 11:(s=e.sent).signatures.length>0&&(i.until=s.signatures[s.signatures.length-1].toString()),e.next=22;break;case 15:if(e.prev=15,e.t0=e.catch(8),!(e.t0 instanceof Error&&e.t0.message.includes("skipped"))){e.next=21;break}return e.abrupt("continue",4);case 21:throw e.t0;case 22:e.next=4;break;case 24:return e.next=26,this.getSlot("finalized");case 26:o=e.sent;case 27:if("before"in i){e.next=47;break}if(!(++n>o)){e.next=31;break}return e.abrupt("break",47);case 31:return e.prev=31,e.next=34,this.getConfirmedBlockSignatures(n);case 34:(u=e.sent).signatures.length>0&&(i.before=u.signatures[u.signatures.length-1].toString()),e.next=45;break;case 38:if(e.prev=38,e.t1=e.catch(31),!(e.t1 instanceof Error&&e.t1.message.includes("skipped"))){e.next=44;break}return e.abrupt("continue",27);case 44:throw e.t1;case 45:e.next=27;break;case 47:return e.next=49,this.getConfirmedSignaturesForAddress2(t,i);case 49:return c=e.sent,e.abrupt("return",c.map((function(e){return e.signature})));case 51:case"end":return e.stop()}}),e,this,[[8,15],[31,38]])}))),function(e,t,r){return W.apply(this,arguments)})},{key:"getConfirmedSignaturesForAddress2",value:(C=(0,o.Z)(h().mark((function e(t,r,n){var i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),e.next=3,this._rpcRequest("getConfirmedSignaturesForAddress2",i);case 3:if(a=e.sent,!("error"in(s=(0,_.Ue)(a,sr)))){e.next=7;break}throw new rt(s.error,"failed to get confirmed signatures for address");case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return C.apply(this,arguments)})},{key:"getSignaturesForAddress",value:(O=(0,o.Z)(h().mark((function e(t,r,n){var i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),e.next=3,this._rpcRequest("getSignaturesForAddress",i);case 3:if(a=e.sent,!("error"in(s=(0,_.Ue)(a,or)))){e.next=7;break}throw new rt(s.error,"failed to get signatures for address");case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return O.apply(this,arguments)})},{key:"getAddressLookupTable",value:(T=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfoAndContext(t,r);case 2:return n=e.sent,i=n.context,a=n.value,s=null,null!==a&&(s=new ut({key:t,state:ut.deserialize(a.data)})),e.abrupt("return",{context:i,value:s});case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return T.apply(this,arguments)})},{key:"getNonceAndContext",value:(Z=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfoAndContext(t,r);case 2:return n=e.sent,i=n.context,a=n.value,s=null,null!==a&&(s=Ne.fromAccountData(a.data)),e.abrupt("return",{context:i,value:s});case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return Z.apply(this,arguments)})},{key:"getNonce",value:(P=(0,o.Z)(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNonceAndContext(t,r).then((function(e){return e.value})).catch((function(e){throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return P.apply(this,arguments)})},{key:"requestAirdrop",value:(E=(0,o.Z)(h().mark((function e(t,r){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("requestAirdrop",[t.toBase58(),r]);case 2:if(n=e.sent,!("error"in(i=(0,_.Ue)(n,rn)))){e.next=6;break}throw new rt(i.error,"airdrop to ".concat(t.toBase58()," failed"));case 6:return e.abrupt("return",i.result);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return E.apply(this,arguments)})},{key:"_blockhashWithExpiryBlockHeight",value:(B=(0,o.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=10;break}case 1:if(!this._pollingBlockhash){e.next=6;break}return e.next=4,Le(100);case 4:e.next=1;break;case 6:if(r=Date.now()-this._blockhashInfo.lastFetch,n=r>=3e4,null===this._blockhashInfo.latestBlockhash||n){e.next=10;break}return e.abrupt("return",this._blockhashInfo.latestBlockhash);case 10:return e.next=12,this._pollNewBlockhash();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return B.apply(this,arguments)})},{key:"_pollNewBlockhash",value:(x=(0,o.Z)(h().mark((function e(){var t,r,n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._pollingBlockhash=!0,e.prev=1,t=Date.now(),r=this._blockhashInfo.latestBlockhash,n=r?r.blockhash:null,i=0;case 6:if(!(i<50)){e.next=18;break}return e.next=9,this.getLatestBlockhash("finalized");case 9:if(a=e.sent,n===a.blockhash){e.next=13;break}return this._blockhashInfo={latestBlockhash:a,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e.abrupt("return",a);case 13:return e.next=15,Le(200);case 15:i++,e.next=6;break;case 18:throw new Error("Unable to obtain a new blockhash after ".concat(Date.now()-t,"ms"));case 19:return e.prev=19,this._pollingBlockhash=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[1,,19,22]])}))),function(){return x.apply(this,arguments)})},{key:"getStakeMinimumDelegation",value:(w=(0,o.Z)(h().mark((function e(t){var r,n,i,a,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vt(t),n=r.commitment,i=r.config,a=this._buildArgs([],n,"base64",i),e.next=4,this._rpcRequest("getStakeMinimumDelegation",a);case 4:if(s=e.sent,!("error"in(o=(0,_.Ue)(s,It((0,_.Rx)()))))){e.next=8;break}throw new rt(o.error,"failed to get stake minimum delegation");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"simulateTransaction",value:(k=(0,o.Z)(h().mark((function e(t,r,n){var i,s,o,u,c,l,d,f,p,y,g,b,m,k,v,w,x,I,A,B,R,E,P,Z,T,O;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("message"in t)){e.next=17;break}if(i=t.serialize(),s=a.Buffer.from(i).toString("base64"),!Array.isArray(r)&&void 0===n){e.next=6;break}throw new Error("Invalid arguments");case 6:return(o=r||{}).encoding="base64","commitment"in o||(o.commitment=this.commitment),u=[s,o],e.next=12,this._rpcRequest("simulateTransaction",u);case 12:if(c=e.sent,!("error"in(l=(0,_.Ue)(c,Kt)))){e.next=16;break}throw new Error("failed to simulate transaction: "+l.error.message);case 16:return e.abrupt("return",l.result);case 17:if(t instanceof Se?(f=t,(d=new Se).feePayer=f.feePayer,d.instructions=t.instructions,d.nonceInfo=f.nonceInfo,d.signatures=f.signatures):(d=Se.populate(t))._message=d._json=void 0,void 0===r||Array.isArray(r)){e.next=20;break}throw new Error("Invalid arguments");case 20:if(p=r,!d.nonceInfo||!p){e.next=25;break}(y=d).sign.apply(y,(0,S.Z)(p)),e.next=45;break;case 25:g=this._disableBlockhashCaching;case 26:return e.next=28,this._blockhashWithExpiryBlockHeight(g);case 28:if(m=e.sent,d.lastValidBlockHeight=m.lastValidBlockHeight,d.recentBlockhash=m.blockhash,p){e.next=33;break}return e.abrupt("break",45);case 33:if((b=d).sign.apply(b,(0,S.Z)(p)),d.signature){e.next=36;break}throw new Error("!signature");case 36:if(k=d.signature.toString("base64"),this._blockhashInfo.simulatedSignatures.includes(k)||this._blockhashInfo.transactionSignatures.includes(k)){e.next=42;break}return this._blockhashInfo.simulatedSignatures.push(k),e.abrupt("break",45);case 42:g=!0;case 43:e.next=26;break;case 45:return v=d._compile(),w=v.serialize(),x=d._serialize(w),I=x.toString("base64"),A={encoding:"base64",commitment:this.commitment},n&&(B=(Array.isArray(n)?n:v.nonProgramIds()).map((function(e){return e.toBase58()})),A.accounts={encoding:"base64",addresses:B}),p&&(A.sigVerify=!0),R=[I,A],e.next=55,this._rpcRequest("simulateTransaction",R);case 55:if(E=e.sent,!("error"in(P=(0,_.Ue)(E,Kt)))){e.next=60;break}throw"data"in P.error&&(Z=P.error.data.logs)&&Array.isArray(Z)&&(O=(T="\n    ")+Z.join(T),console.error(P.error.message,O)),new tt("failed to simulate transaction: "+P.error.message,Z);case 60:return e.abrupt("return",P.result);case 61:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return k.apply(this,arguments)})},{key:"sendTransaction",value:(m=(0,o.Z)(h().mark((function e(t,r,n){var i,a,s,o,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("version"in t)){e.next=7;break}if(!r||!Array.isArray(r)){e.next=3;break}throw new Error("Invalid arguments");case 3:return i=t.serialize(),e.next=6,this.sendRawTransaction(i,r);case 6:return e.abrupt("return",e.sent);case 7:if(void 0!==r&&Array.isArray(r)){e.next=9;break}throw new Error("Invalid arguments");case 9:if(a=r,!t.nonceInfo){e.next=14;break}t.sign.apply(t,(0,S.Z)(a)),e.next=32;break;case 14:s=this._disableBlockhashCaching;case 15:return e.next=17,this._blockhashWithExpiryBlockHeight(s);case 17:if(o=e.sent,t.lastValidBlockHeight=o.lastValidBlockHeight,t.recentBlockhash=o.blockhash,t.sign.apply(t,(0,S.Z)(a)),t.signature){e.next=23;break}throw new Error("!signature");case 23:if(u=t.signature.toString("base64"),this._blockhashInfo.transactionSignatures.includes(u)){e.next=29;break}return this._blockhashInfo.transactionSignatures.push(u),e.abrupt("break",32);case 29:s=!0;case 30:e.next=15;break;case 32:return c=t.serialize(),e.next=35,this.sendRawTransaction(c,n);case 35:return e.abrupt("return",e.sent);case 36:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return m.apply(this,arguments)})},{key:"sendRawTransaction",value:(b=(0,o.Z)(h().mark((function e(t,r){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=q(t).toString("base64"),e.next=3,this.sendEncodedTransaction(n,r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"sendEncodedTransaction",value:(y=(0,o.Z)(h().mark((function e(t,r){var n,i,a,s,o,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={encoding:"base64"},i=r&&r.skipPreflight,a=r&&r.preflightCommitment||this.commitment,r&&null!=r.maxRetries&&(n.maxRetries=r.maxRetries),r&&null!=r.minContextSlot&&(n.minContextSlot=r.minContextSlot),i&&(n.skipPreflight=i),a&&(n.preflightCommitment=a),s=[t,n],e.next=10,this._rpcRequest("sendTransaction",s);case 10:if(o=e.sent,!("error"in(u=(0,_.Ue)(o,nn)))){e.next=15;break}throw"data"in u.error&&(c=u.error.data.logs),new tt("failed to send transaction: "+u.error.message,c);case 15:return e.abrupt("return",u.result);case 16:case"end":return e.stop()}}),e,this)}))),function(e,t){return y.apply(this,arguments)})},{key:"_wsOnOpen",value:function(){var e=this;this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((function(){(0,o.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._rpcWebSocket.notify("ping");case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})))()}),5e3),this._updateSubscriptions()}},{key:"_wsOnError",value:function(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}},{key:"_wsOnClose",value:function(e){var t=this;this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((function(e){var r=(0,v.Z)(e,2),n=r[0],i=r[1];t._setSubscription(n,gt(gt({},i),{},{state:"pending"}))}))):this._updateSubscriptions()}},{key:"_setSubscription",value:function(e,t){var r,n=null===(r=this._subscriptionsByHash[e])||void 0===r?void 0:r.state;if(this._subscriptionsByHash[e]=t,n!==t.state){var i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach((function(e){try{e(t.state)}catch(e){}}))}}},{key:"_onSubscriptionStateChange",value:function(e,t){var r,n=this,i=this._subscriptionHashByClientSubscriptionId[e];if(null==i)return function(){};var a=(r=this._subscriptionStateChangeCallbacksByHash)[i]||(r[i]=new Set);return a.add(t),function(){a.delete(t),0===a.size&&delete n._subscriptionStateChangeCallbacksByHash[i]}}},{key:"_updateSubscriptions",value:(p=(0,o.Z)(h().mark((function e(){var t,r,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(this._subscriptionsByHash).length){e.next=3;break}return this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((function(){n._rpcWebSocketIdleTimeout=null;try{n._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log("Error when closing socket connection: ".concat(e.message))}}),500)),e.abrupt("return");case 3:if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),this._rpcWebSocketConnected){e.next=7;break}return this._rpcWebSocket.connect(),e.abrupt("return");case 7:return t=this._rpcWebSocketGeneration,r=function(){return t===n._rpcWebSocketGeneration},e.next=11,Promise.all(Object.keys(this._subscriptionsByHash).map(function(){var e=(0,o.Z)(h().mark((function e(t){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(i=n._subscriptionsByHash[t])){e.next=3;break}return e.abrupt("return");case 3:e.t0=i.state,e.next="pending"===e.t0||"unsubscribed"===e.t0?6:"subscribed"===e.t0?15:"subscribing"===e.t0||"unsubscribing"===e.t0?19:20;break;case 6:if(0!==i.callbacks.size){e.next=12;break}return delete n._subscriptionsByHash[t],"unsubscribed"===i.state&&delete n._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],e.next=11,n._updateSubscriptions();case 11:return e.abrupt("return");case 12:return e.next=14,(0,o.Z)(h().mark((function e(){var a,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.args,s=i.method,e.prev=1,n._setSubscription(t,gt(gt({},i),{},{state:"subscribing"})),e.next=5,n._rpcWebSocket.call(s,a);case 5:return o=e.sent,n._setSubscription(t,gt(gt({},i),{},{serverSubscriptionId:o,state:"subscribed"})),n._subscriptionCallbacksByServerSubscriptionId[o]=i.callbacks,e.next=10,n._updateSubscriptions();case 10:e.next=20;break;case 12:if(e.prev=12,e.t0=e.catch(1),e.t0 instanceof Error&&console.error("".concat(s," error for argument"),a,e.t0.message),r()){e.next=17;break}return e.abrupt("return");case 17:return n._setSubscription(t,gt(gt({},i),{},{state:"pending"})),e.next=20,n._updateSubscriptions();case 20:case"end":return e.stop()}}),e,null,[[1,12]])})))();case 14:case 18:case 19:return e.abrupt("break",20);case 15:if(0!==i.callbacks.size){e.next=18;break}return e.next=18,(0,o.Z)(h().mark((function e(){var a,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.serverSubscriptionId,s=i.unsubscribeMethod,!n._subscriptionsAutoDisposedByRpc.has(a)){e.next=5;break}n._subscriptionsAutoDisposedByRpc.delete(a),e.next=21;break;case 5:return n._setSubscription(t,gt(gt({},i),{},{state:"unsubscribing"})),n._setSubscription(t,gt(gt({},i),{},{state:"unsubscribing"})),e.prev=7,e.next=10,n._rpcWebSocket.call(s,[a]);case 10:e.next=21;break;case 12:if(e.prev=12,e.t0=e.catch(7),e.t0 instanceof Error&&console.error("".concat(s," error:"),e.t0.message),r()){e.next=17;break}return e.abrupt("return");case 17:return n._setSubscription(t,gt(gt({},i),{},{state:"subscribed"})),e.next=20,n._updateSubscriptions();case 20:return e.abrupt("return");case 21:return n._setSubscription(t,gt(gt({},i),{},{state:"unsubscribed"})),e.next=24,n._updateSubscriptions();case 24:case"end":return e.stop()}}),e,null,[[7,12]])})))();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"_handleServerNotification",value:function(e,t){var r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach((function(e){try{e.apply(void 0,(0,S.Z)(t))}catch(e){console.error(e)}}))}},{key:"_wsOnAccountNotification",value:function(e){var t=(0,_.Ue)(e,ur),r=t.result,n=t.subscription;this._handleServerNotification(n,[r.value,r.context])}},{key:"_makeSubscription",value:function(e,t){var r=this,n=this._nextClientSubscriptionId++,i=$e([e.method,t],!0),a=this._subscriptionsByHash[i];return void 0===a?this._subscriptionsByHash[i]=gt(gt({},e),{},{args:t,callbacks:new Set([e.callback]),state:"pending"}):a.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=(0,o.Z)(h().mark((function t(){var a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete r._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete r._subscriptionHashByClientSubscriptionId[n],ue(void 0!==(a=r._subscriptionsByHash[i]),"Could not find a `Subscription` when tearing down client subscription #".concat(n)),a.callbacks.delete(e.callback),t.next=7,r._updateSubscriptions();case 7:case"end":return t.stop()}}),t)}))),this._updateSubscriptions(),n}},{key:"onAccountChange",value:function(e,t,r){var n=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}},{key:"removeAccountChangeListener",value:(f=(0,o.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"account change");case 2:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"_wsOnProgramAccountNotification",value:function(e){var t=(0,_.Ue)(e,lr),r=t.result,n=t.subscription;this._handleServerNotification(n,[{accountId:r.value.pubkey,accountInfo:r.value.account},r.context])}},{key:"onProgramAccountChange",value:function(e,t,r,n){var i=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64",n?{filters:n}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}},{key:"removeProgramAccountChangeListener",value:(d=(0,o.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"program account change");case 2:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"onLogs",value:function(e,t,r){var n=this._buildArgs(["object"===(0,I.Z)(e)?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}},{key:"removeOnLogsListener",value:(l=(0,o.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"logs");case 2:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"_wsOnLogsNotification",value:function(e){var t=(0,_.Ue)(e,sn),r=t.result,n=t.subscription;this._handleServerNotification(n,[r.value,r.context])}},{key:"_wsOnSlotNotification",value:function(e){var t=(0,_.Ue)(e,hr),r=t.result,n=t.subscription;this._handleServerNotification(n,[r])}},{key:"onSlotChange",value:function(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}},{key:"removeSlotChangeListener",value:(c=(0,o.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"slot change");case 2:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"_wsOnSlotUpdatesNotification",value:function(e){var t=(0,_.Ue)(e,pr),r=t.result,n=t.subscription;this._handleServerNotification(n,[r])}},{key:"onSlotUpdate",value:function(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}},{key:"removeSlotUpdateListener",value:(u=(0,o.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"slot update");case 2:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"_unsubscribeClientSubscription",value:(s=(0,o.Z)(h().mark((function e(t,r){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t])){e.next=6;break}return e.next=4,n();case 4:e.next=7;break;case 6:console.warn("Ignored unsubscribe request because an active subscription with id "+"`".concat(t,"` for '").concat(r,"' events ")+"could not be found.");case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"_buildArgs",value:function(e,t,r,n){var i=t||this._commitment;if(i||r||n){var a={};r&&(a.encoding=r),i&&(a.commitment=i),n&&(a=Object.assign(a,n)),e.push(a)}return e}},{key:"_buildArgsAtLeastConfirmed",value:function(e,t,r,n){var i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}},{key:"_wsOnSignatureNotification",value:function(e){var t=(0,_.Ue)(e,yr),r=t.result,n=t.subscription;"receivedSignature"!==r.value&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,"receivedSignature"===r.value?[{type:"received"},r.context]:[{type:"status",result:r.value},r.context])}},{key:"onSignature",value:function(e,t,r){var n=this,i=this._buildArgs([e],r||this._commitment||"finalized"),a=this._makeSubscription({callback:function(e,r){if("status"===e.type){t(e.result,r);try{n.removeSignatureListener(a)}catch(e){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return a}},{key:"onSignatureWithOptions",value:function(e,t,r){var n=this,i=gt(gt({},r),{},{commitment:r&&r.commitment||this._commitment||"finalized"}),a=i.commitment,s=(0,A.Z)(i,pt),o=this._buildArgs([e],a,void 0,s),u=this._makeSubscription({callback:function(e,r){t(e,r);try{n.removeSignatureListener(u)}catch(e){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return u}},{key:"removeSignatureListener",value:(r=(0,o.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"signature result");case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_wsOnRootNotification",value:function(e){var t=(0,_.Ue)(e,gr),r=t.result,n=t.subscription;this._handleServerNotification(n,[r])}},{key:"onRootChange",value:function(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}},{key:"removeRootChangeListener",value:(t=(0,o.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"root change");case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),cn=function(){function e(t){(0,n.Z)(this,e),this._keypair=void 0,this._keypair=null!=t?t:W()}return(0,i.Z)(e,[{key:"publicKey",get:function(){return new F(this._keypair.publicKey)}},{key:"secretKey",get:function(){return new Uint8Array(this._keypair.secretKey)}}],[{key:"generate",value:function(){return new e(W())}},{key:"fromSecretKey",value:function(t,r){if(64!==t.byteLength)throw new Error("bad secret key size");var n=t.slice(32,64);if(!r||!r.skipValidation)for(var i=t.slice(0,32),a=L(i),s=0;s<32;s++)if(n[s]!==a[s])throw new Error("provided secretKey is invalid");return new e({publicKey:n,secretKey:t})}},{key:"fromSeed",value:function(t){var r=L(t),n=new Uint8Array(64);return n.set(t),n.set(r,32),new e({publicKey:r,secretKey:n})}}]),e}(),ln=Object.freeze({CreateLookupTable:{index:0,layout:k.n_([k.Jq("instruction"),Me("recentSlot"),k.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:k.n_([k.Jq("instruction")])},ExtendLookupTable:{index:2,layout:k.n_([k.Jq("instruction"),Me(),k.A9(re(),k.cv(k.Jq(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:k.n_([k.Jq("instruction")])},CloseLookupTable:{index:4,layout:k.n_([k.Jq("instruction")])}}),dn=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"createLookupTable",value:function(e){var t=F.findProgramAddressSync([e.authority.toBuffer(),(0,w.k$)(BigInt(e.recentSlot),8)],this.programId),r=(0,v.Z)(t,2),n=r[0],i=r[1],a=Ue(ln.CreateLookupTable,{recentSlot:BigInt(e.recentSlot),bumpSeed:i}),s=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:De.programId,isSigner:!1,isWritable:!1}];return[new xe({programId:this.programId,keys:s,data:a}),n]}},{key:"freezeLookupTable",value:function(e){var t=Ue(ln.FreezeLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new xe({programId:this.programId,keys:r,data:t})}},{key:"extendLookupTable",value:function(e){var t=Ue(ln.ExtendLookupTable,{addresses:e.addresses.map((function(e){return e.toBytes()}))}),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&r.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:De.programId,isSigner:!1,isWritable:!1}),new xe({programId:this.programId,keys:r,data:t})}},{key:"deactivateLookupTable",value:function(e){var t=Ue(ln.DeactivateLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new xe({programId:this.programId,keys:r,data:t})}},{key:"closeLookupTable",value:function(e){var t=Ue(ln.CloseLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new xe({programId:this.programId,keys:r,data:t})}}]),e}();dn.programId=new F("AddressLookupTab1e1111111111111111111111111");var hn=Object.freeze({RequestUnits:{index:0,layout:k.n_([k.u8("instruction"),k.Jq("units"),k.Jq("additionalFee")])},RequestHeapFrame:{index:1,layout:k.n_([k.u8("instruction"),k.Jq("bytes")])},SetComputeUnitLimit:{index:2,layout:k.n_([k.u8("instruction"),k.Jq("units")])},SetComputeUnitPrice:{index:3,layout:k.n_([k.u8("instruction"),Me("microLamports")])}}),fn=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"requestUnits",value:function(e){var t=Ue(hn.RequestUnits,e);return new xe({keys:[],programId:this.programId,data:t})}},{key:"requestHeapFrame",value:function(e){var t=Ue(hn.RequestHeapFrame,e);return new xe({keys:[],programId:this.programId,data:t})}},{key:"setComputeUnitLimit",value:function(e){var t=Ue(hn.SetComputeUnitLimit,e);return new xe({keys:[],programId:this.programId,data:t})}},{key:"setComputeUnitPrice",value:function(e){var t=Ue(hn.SetComputeUnitPrice,{microLamports:BigInt(e.microLamports)});return new xe({keys:[],programId:this.programId,data:t})}}]),e}();fn.programId=new F("ComputeBudget111111111111111111111111111111");var pn=k.n_([k.u8("numSignatures"),k.u8("padding"),k.KB("signatureOffset"),k.KB("signatureInstructionIndex"),k.KB("publicKeyOffset"),k.KB("publicKeyInstructionIndex"),k.KB("messageDataOffset"),k.KB("messageDataSize"),k.KB("messageInstructionIndex")]),yn=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"createInstructionWithPublicKey",value:function(t){var r=t.publicKey,n=t.message,i=t.signature,s=t.instructionIndex;ue(32===r.length,"Public Key must be ".concat(32," bytes but received ").concat(r.length," bytes")),ue(64===i.length,"Signature must be ".concat(64," bytes but received ").concat(i.length," bytes"));var o=pn.span,u=o+r.length,c=u+i.length,l=a.Buffer.alloc(c+n.length),d=null==s?65535:s;return pn.encode({numSignatures:1,padding:0,signatureOffset:u,signatureInstructionIndex:d,publicKeyOffset:o,publicKeyInstructionIndex:d,messageDataOffset:c,messageDataSize:n.length,messageInstructionIndex:d},l),l.fill(r,o),l.fill(i,u),l.fill(n,c),new xe({keys:[],programId:e.programId,data:l})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,r=e.message,n=e.instructionIndex;ue(64===t.length,"Private key must be ".concat(64," bytes but received ").concat(t.length," bytes"));try{var i=cn.fromSecretKey(t),a=i.publicKey.toBytes(),s=K(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:s,instructionIndex:n})}catch(e){throw new Error("Error creating instruction; ".concat(e))}}}]),e}();yn.programId=new F("Ed25519SigVerify111111111111111111111111111");C.kA.utils.isValidPrivateKey;var gn=C.kA.getPublicKey,bn=k.n_([k.u8("numSignatures"),k.KB("signatureOffset"),k.u8("signatureInstructionIndex"),k.KB("ethAddressOffset"),k.u8("ethAddressInstructionIndex"),k.KB("messageDataOffset"),k.KB("messageDataSize"),k.u8("messageInstructionIndex"),k.Ik(20,"ethAddress"),k.Ik(64,"signature"),k.u8("recoveryId")]),mn=function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"publicKeyToEthAddress",value:function(e){ue(64===e.length,"Public key must be ".concat(64," bytes but received ").concat(e.length," bytes"));try{return a.Buffer.from((0,O.fr)(q(e))).slice(-20)}catch(e){throw new Error("Error constructing Ethereum address: ".concat(e))}}},{key:"createInstructionWithPublicKey",value:function(t){var r=t.publicKey,n=t.message,i=t.signature,a=t.recoveryId,s=t.instructionIndex;return e.createInstructionWithEthAddress({ethAddress:e.publicKeyToEthAddress(r),message:n,signature:i,recoveryId:a,instructionIndex:s})}},{key:"createInstructionWithEthAddress",value:function(t){var r,n=t.ethAddress,i=t.message,s=t.signature,o=t.recoveryId,u=t.instructionIndex,c=void 0===u?0:u;ue(20===(r="string"==typeof n?n.startsWith("0x")?a.Buffer.from(n.substr(2),"hex"):a.Buffer.from(n,"hex"):n).length,"Address must be ".concat(20," bytes but received ").concat(r.length," bytes"));var l=12+r.length,d=l+s.length+1,h=a.Buffer.alloc(bn.span+i.length);return bn.encode({numSignatures:1,signatureOffset:l,signatureInstructionIndex:c,ethAddressOffset:12,ethAddressInstructionIndex:c,messageDataOffset:d,messageDataSize:i.length,messageInstructionIndex:c,signature:q(s),ethAddress:q(r),recoveryId:o},h),h.fill(q(i),bn.span),new xe({keys:[],programId:e.programId,data:h})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,r=e.message,n=e.instructionIndex;ue(32===t.length,"Private key must be ".concat(32," bytes but received ").concat(t.length," bytes"));try{var i=q(t),s=gn(i,!1).slice(1),o=function(e,t){var r=C.kA.sign(e,t);return[r.toCompactRawBytes(),r.recovery]}(a.Buffer.from((0,O.fr)(q(r))),i),u=(0,v.Z)(o,2),c=u[0],l=u[1];return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:c,recoveryId:l,instructionIndex:n})}catch(e){throw new Error("Error creating instruction; ".concat(e))}}}]),e}();mn.programId=new F("KeccakSecp256k11111111111111111111111111111");var kn=new F("StakeConfig11111111111111111111111111111111"),vn=(0,i.Z)((function e(t,r,i){(0,n.Z)(this,e),this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=r,this.custodian=i}));vn.default=new vn(0,0,F.default);var wn=Object.freeze({Initialize:{index:0,layout:k.n_([k.Jq("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"authorized";return k.n_([re("staker"),re("withdrawer")],e)}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lockup";return k.n_([k.gM("unixTimestamp"),k.gM("epoch"),re("custodian")],e)}()])},Authorize:{index:1,layout:k.n_([k.Jq("instruction"),re("newAuthorized"),k.Jq("stakeAuthorizationType")])},Delegate:{index:2,layout:k.n_([k.Jq("instruction")])},Split:{index:3,layout:k.n_([k.Jq("instruction"),k.gM("lamports")])},Withdraw:{index:4,layout:k.n_([k.Jq("instruction"),k.gM("lamports")])},Deactivate:{index:5,layout:k.n_([k.Jq("instruction")])},Merge:{index:7,layout:k.n_([k.Jq("instruction")])},AuthorizeWithSeed:{index:8,layout:k.n_([k.Jq("instruction"),re("newAuthorized"),k.Jq("stakeAuthorizationType"),ie("authoritySeed"),re("authorityOwner")])}}),xn=(Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"initialize",value:function(e){var t=e.stakePubkey,r=e.authorized,n=e.lockup||vn.default,i=Ue(wn.Initialize,{authorized:{staker:q(r.staker.toBuffer()),withdrawer:q(r.withdrawer.toBuffer())},lockup:{unixTimestamp:n.unixTimestamp,epoch:n.epoch,custodian:q(n.custodian.toBuffer())}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Te,isSigner:!1,isWritable:!1}],programId:this.programId,data:i};return new xe(a)}},{key:"createAccountWithSeed",value:function(e){var t=new Se;t.add(De.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));var r=e.stakePubkey,n=e.authorized,i=e.lockup;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}},{key:"createAccount",value:function(e){var t=new Se;t.add(De.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));var r=e.stakePubkey,n=e.authorized,i=e.lockup;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}},{key:"delegate",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.votePubkey,i=Ue(wn.Delegate);return(new Se).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Pe,isSigner:!1,isWritable:!1},{pubkey:Oe,isSigner:!1,isWritable:!1},{pubkey:kn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}},{key:"authorize",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.newAuthorizedPubkey,i=e.stakeAuthorizationType,a=e.custodianPubkey,s=Ue(wn.Authorize,{newAuthorized:q(n.toBuffer()),stakeAuthorizationType:i.index}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Pe,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&o.push({pubkey:a,isSigner:!1,isWritable:!1}),(new Se).add({keys:o,programId:this.programId,data:s})}},{key:"authorizeWithSeed",value:function(e){var t=e.stakePubkey,r=e.authorityBase,n=e.authoritySeed,i=e.authorityOwner,a=e.newAuthorizedPubkey,s=e.stakeAuthorizationType,o=e.custodianPubkey,u=Ue(wn.AuthorizeWithSeed,{newAuthorized:q(a.toBuffer()),stakeAuthorizationType:s.index,authoritySeed:n,authorityOwner:q(i.toBuffer())}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Pe,isSigner:!1,isWritable:!1}];return o&&c.push({pubkey:o,isSigner:!1,isWritable:!1}),(new Se).add({keys:c,programId:this.programId,data:u})}},{key:"splitInstruction",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.splitStakePubkey,i=e.lamports,a=Ue(wn.Split,{lamports:i});return new xe({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}},{key:"split",value:function(e){var t=new Se;return t.add(De.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}},{key:"splitWithSeed",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.splitStakePubkey,i=e.basePubkey,a=e.seed,s=e.lamports,o=new Se;return o.add(De.allocate({accountPubkey:n,basePubkey:i,seed:a,space:this.space,programId:this.programId})),o.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:s}))}},{key:"merge",value:function(e){var t=e.stakePubkey,r=e.sourceStakePubKey,n=e.authorizedPubkey,i=Ue(wn.Merge);return(new Se).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Pe,isSigner:!1,isWritable:!1},{pubkey:Oe,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}},{key:"withdraw",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.toPubkey,i=e.lamports,a=e.custodianPubkey,s=Ue(wn.Withdraw,{lamports:i}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Pe,isSigner:!1,isWritable:!1},{pubkey:Oe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&o.push({pubkey:a,isSigner:!1,isWritable:!1}),(new Se).add({keys:o,programId:this.programId,data:s})}},{key:"deactivate",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=Ue(wn.Deactivate);return(new Se).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Pe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}]),e}());xn.programId=new F("Stake11111111111111111111111111111111111111"),xn.space=200;var Sn=Object.freeze({InitializeAccount:{index:0,layout:k.n_([k.Jq("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteInit";return k.n_([re("nodePubkey"),re("authorizedVoter"),re("authorizedWithdrawer"),k.u8("commission")],e)}()])},Authorize:{index:1,layout:k.n_([k.Jq("instruction"),re("newAuthorized"),k.Jq("voteAuthorizationType")])},Withdraw:{index:3,layout:k.n_([k.Jq("instruction"),k.gM("lamports")])},AuthorizeWithSeed:{index:10,layout:k.n_([k.Jq("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteAuthorizeWithSeedArgs";return k.n_([k.Jq("voteAuthorizationType"),re("currentAuthorityDerivedKeyOwnerPubkey"),ie("currentAuthorityDerivedKeySeed"),re("newAuthorized")],e)}()])}}),In=(Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),function(){function e(){(0,n.Z)(this,e)}return(0,i.Z)(e,null,[{key:"initializeAccount",value:function(e){var t=e.votePubkey,r=e.nodePubkey,n=e.voteInit,i=Ue(Sn.InitializeAccount,{voteInit:{nodePubkey:q(n.nodePubkey.toBuffer()),authorizedVoter:q(n.authorizedVoter.toBuffer()),authorizedWithdrawer:q(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Te,isSigner:!1,isWritable:!1},{pubkey:Pe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new xe(a)}},{key:"createAccount",value:function(e){var t=new Se;return t.add(De.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}},{key:"authorize",value:function(e){var t=e.votePubkey,r=e.authorizedPubkey,n=e.newAuthorizedPubkey,i=e.voteAuthorizationType,a=Ue(Sn.Authorize,{newAuthorized:q(n.toBuffer()),voteAuthorizationType:i.index}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Pe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Se).add({keys:s,programId:this.programId,data:a})}},{key:"authorizeWithSeed",value:function(e){var t=e.currentAuthorityDerivedKeyBasePubkey,r=e.currentAuthorityDerivedKeyOwnerPubkey,n=e.currentAuthorityDerivedKeySeed,i=e.newAuthorizedPubkey,a=e.voteAuthorizationType,s=e.votePubkey,o=Ue(Sn.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:q(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:q(i.toBuffer()),voteAuthorizationType:a.index}}),u=[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:Pe,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return(new Se).add({keys:u,programId:this.programId,data:o})}},{key:"withdraw",value:function(e){var t=e.votePubkey,r=e.authorizedWithdrawerPubkey,n=e.lamports,i=e.toPubkey,a=Ue(Sn.Withdraw,{lamports:n}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Se).add({keys:s,programId:this.programId,data:a})}},{key:"safeWithdraw",value:function(t,r,n){if(t.lamports>r-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return e.withdraw(t)}}]),e}());In.programId=new F("Vote111111111111111111111111111111111111111"),In.space=3731;new F("Va1idator1nfo111111111111111111111111111111"),(0,_.dt)({name:(0,_.Z_)(),website:(0,_.jt)((0,_.Z_)()),details:(0,_.jt)((0,_.Z_)()),keybaseUsername:(0,_.jt)((0,_.Z_)())}),new F("Vote111111111111111111111111111111111111111"),k.n_([re("nodePubkey"),re("authorizedWithdrawer"),k.u8("commission"),k._O(),k.A9(k.n_([k._O("slot"),k.Jq("confirmationCount")]),k.cv(k.Jq(),-8),"votes"),k.u8("rootSlotValid"),k._O("rootSlot"),k._O(),k.A9(k.n_([k._O("epoch"),re("authorizedVoter")]),k.cv(k.Jq(),-8),"authorizedVoters"),k.n_([k.A9(k.n_([re("authorizedPubkey"),k._O("epochOfLastAuthorizedSwitch"),k._O("targetEpoch")]),32,"buf"),k._O("idx"),k.u8("isEmpty")],"priorVoters"),k._O(),k.A9(k.n_([k._O("epoch"),k._O("credits"),k._O("prevCredits")]),k.cv(k.Jq(),-8),"epochCredits"),k.n_([k._O("slot"),k._O("timestamp")],"lastTimestamp")])},69191:(e,t,r)=>{"use strict";var n=r(89509).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),s=a.charCodeAt(0);if(255!==t[s])throw new TypeError(a+" is ambiguous");t[s]=i}var o=e.length,u=e.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var r=0,i=0,a=0;e[r]===u;)i++,r++;for(var s=(e.length-r)*c+1>>>0,l=new Uint8Array(s);e[r];){var d=t[e.charCodeAt(r)];if(255===d)return;for(var h=0,f=s-1;(0!==d||h<a)&&-1!==f;f--,h++)d+=o*l[f]>>>0,l[f]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");a=h,r++}for(var p=s-a;p!==s&&0===l[p];)p++;var y=n.allocUnsafe(i+(s-p));y.fill(0,0,i);for(var g=i;p!==s;)y[g++]=l[p++];return y}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,i=0,a=0,s=t.length;a!==s&&0===t[a];)a++,r++;for(var c=(s-a)*l+1>>>0,d=new Uint8Array(c);a!==s;){for(var h=t[a],f=0,p=c-1;(0!==h||f<i)&&-1!==p;p--,f++)h+=256*d[p]>>>0,d[p]=h%o>>>0,h=h/o>>>0;if(0!==h)throw new Error("Non-zero carry");i=f,a++}for(var y=c-i;y!==c&&0===d[y];)y++;for(var g=u.repeat(r);y<c;++y)g+=e.charAt(d[y]);return g},decodeUnsafe:d,decode:function(e){var t=d(e);if(t)return t;throw new Error("Non-base"+o+" character")}}}},10011:(e,t,r)=>{var n=r(69191);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}}]);